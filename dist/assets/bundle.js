/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,s=r.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function d(t,e,n,i){var r=e&&e.prototype instanceof _?e:_,s=Object.create(r.prototype),a=new N(i||[]);return o(s,"_invoke",{value:D(t,n,a)}),s}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",y="completed",v={};function _(){}function w(){}function b(){}var E={};h(E,c,(function(){return this}));var T=Object.getPrototypeOf,A=T&&T(T(L([])));A&&A!==r&&s.call(A,c)&&(E=A);var I=b.prototype=_.prototype=Object.create(E);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(r,o,a,c){var l=f(t[r],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==n(h)&&s.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,a,c)}),(function(t){i("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,c)}))}c(l.arg)}var r;o(this,"_invoke",{value:function(t,n){function s(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(s,s):s()}})}function D(e,n,i){var r=p;return function(s,o){if(r===m)throw new Error("Generator is already running");if(r===y){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var c=k(a,i);if(c){if(c===v)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=m;var l=f(e,n,i);if("normal"===l.type){if(r=i.done?y:g,l.arg===v)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=y,i.method="throw",i.arg=l.arg)}}}function k(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),v;var s=f(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,v;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[c];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(s.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=b,o(I,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=h(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,u,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},S(C.prototype),h(C.prototype,l,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new C(d(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(I),h(I,u,"Generator"),h(I,c,(function(){return this})),h(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=L,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=s.call(o,"catchLoc"),l=s.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),v}},e}function r(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(i,r)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var o=t.apply(e,n);function a(t){r(o,i,s,a,c,"next",t)}function c(t){r(o,i,s,a,c,"throw",t)}a(void 0)}))}}function o(t){return a.apply(this,arguments)}function a(){return(a=s(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t.r(e),t.d(e,{afterMain:()=>x,afterRead:()=>C,afterWrite:()=>L,applyStyles:()=>$,arrow:()=>ot,auto:()=>g,basePlacements:()=>m,beforeMain:()=>D,beforeRead:()=>I,beforeWrite:()=>O,bottom:()=>d,clippingParents:()=>_,computeStyles:()=>ut,createPopper:()=>Vt,createPopperBase:()=>jt,createPopperLite:()=>$t,detectOverflow:()=>It,end:()=>v,eventListeners:()=>dt,flip:()=>St,hide:()=>kt,left:()=>p,main:()=>k,modifierPhases:()=>P,offset:()=>xt,placements:()=>A,popper:()=>b,popperGenerator:()=>Ft,popperOffsets:()=>Ot,preventOverflow:()=>Nt,read:()=>S,reference:()=>E,right:()=>f,start:()=>y,top:()=>h,variationPlacements:()=>T,viewport:()=>w,write:()=>N});var c=function(t){var e=Object.keys(t);return t[e[Math.floor(Math.random()*e.length)]]};function l(){return u.apply(this,arguments)}function u(){return(u=s(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,o("https://raw.githubusercontent.com/lipis/flag-icons/main/country.json");case 4:return e=t.sent,n=c(e),t.abrupt("return",n);case 9:return t.prev=9,t.t0=t.catch(0),console.error("Error fetching or processing data:",t.t0),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var h="top",d="bottom",f="right",p="left",g="auto",m=[h,d,f,p],y="start",v="end",_="clippingParents",w="viewport",b="popper",E="reference",T=m.reduce((function(t,e){return t.concat([e+"-"+y,e+"-"+v])}),[]),A=[].concat(m,[g]).reduce((function(t,e){return t.concat([e,e+"-"+y,e+"-"+v])}),[]),I="beforeRead",S="read",C="afterRead",D="beforeMain",k="main",x="afterMain",O="beforeWrite",N="write",L="afterWrite",P=[I,S,C,D,k,x,O,N,L];function M(t){return t?(t.nodeName||"").toLowerCase():null}function R(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function F(t){return t instanceof R(t).Element||t instanceof Element}function j(t){return t instanceof R(t).HTMLElement||t instanceof HTMLElement}function V(t){return"undefined"!=typeof ShadowRoot&&(t instanceof R(t).ShadowRoot||t instanceof ShadowRoot)}const $={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];j(r)&&M(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});j(i)&&M(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function U(t){return t.split("-")[0]}var B=Math.max,q=Math.min,z=Math.round;function H(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function G(){return!/^((?!chrome|android).)*safari/i.test(H())}function K(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&j(t)&&(r=t.offsetWidth>0&&z(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&z(i.height)/t.offsetHeight||1);var o=(F(t)?R(t):window).visualViewport,a=!G()&&n,c=(i.left+(a&&o?o.offsetLeft:0))/r,l=(i.top+(a&&o?o.offsetTop:0))/s,u=i.width/r,h=i.height/s;return{width:u,height:h,top:l,right:c+u,bottom:l+h,left:c,x:c,y:l}}function W(t){var e=K(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Q(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&V(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function X(t){return R(t).getComputedStyle(t)}function Y(t){return["table","td","th"].indexOf(M(t))>=0}function J(t){return((F(t)?t.ownerDocument:t.document)||window.document).documentElement}function Z(t){return"html"===M(t)?t:t.assignedSlot||t.parentNode||(V(t)?t.host:null)||J(t)}function tt(t){return j(t)&&"fixed"!==X(t).position?t.offsetParent:null}function et(t){for(var e=R(t),n=tt(t);n&&Y(n)&&"static"===X(n).position;)n=tt(n);return n&&("html"===M(n)||"body"===M(n)&&"static"===X(n).position)?e:n||function(t){var e=/firefox/i.test(H());if(/Trident/i.test(H())&&j(t)&&"fixed"===X(t).position)return null;var n=Z(t);for(V(n)&&(n=n.host);j(n)&&["html","body"].indexOf(M(n))<0;){var i=X(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function nt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function it(t,e,n){return B(t,q(e,n))}function rt(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function st(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const ot={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=U(n.placement),c=nt(a),l=[p,f].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(t,e){return rt("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:st(t,m))}(r.padding,n),g=W(s),y="y"===c?h:p,v="y"===c?d:f,_=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],w=o[c]-n.rects.reference[c],b=et(s),E=b?"y"===c?b.clientHeight||0:b.clientWidth||0:0,T=_/2-w/2,A=u[y],I=E-g[l]-u[v],S=E/2-g[l]/2+T,C=it(A,S,I),D=c;n.modifiersData[i]=((e={})[D]=C,e.centerOffset=C-S,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&Q(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function at(t){return t.split("-")[1]}var ct={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lt(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,c=t.gpuAcceleration,l=t.adaptive,u=t.roundOffsets,g=t.isFixed,m=o.x,y=void 0===m?0:m,_=o.y,w=void 0===_?0:_,b="function"==typeof u?u({x:y,y:w}):{x:y,y:w};y=b.x,w=b.y;var E=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),A=p,I=h,S=window;if(l){var C=et(n),D="clientHeight",k="clientWidth";C===R(n)&&"static"!==X(C=J(n)).position&&"absolute"===a&&(D="scrollHeight",k="scrollWidth"),(r===h||(r===p||r===f)&&s===v)&&(I=d,w-=(g&&C===S&&S.visualViewport?S.visualViewport.height:C[D])-i.height,w*=c?1:-1),r!==p&&(r!==h&&r!==d||s!==v)||(A=f,y-=(g&&C===S&&S.visualViewport?S.visualViewport.width:C[k])-i.width,y*=c?1:-1)}var x,O=Object.assign({position:a},l&&ct),N=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:z(n*r)/r||0,y:z(i*r)/r||0}}({x:y,y:w},R(n)):{x:y,y:w};return y=N.x,w=N.y,c?Object.assign({},O,((x={})[I]=T?"0":"",x[A]=E?"0":"",x.transform=(S.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",x)):Object.assign({},O,((e={})[I]=T?w+"px":"",e[A]=E?y+"px":"",e.transform="",e))}const ut={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:U(e.placement),variation:at(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,lt(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,lt(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var ht={passive:!0};const dt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,c=R(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach((function(t){t.addEventListener("scroll",n.update,ht)})),a&&c.addEventListener("resize",n.update,ht),function(){s&&l.forEach((function(t){t.removeEventListener("scroll",n.update,ht)})),a&&c.removeEventListener("resize",n.update,ht)}},data:{}};var ft={left:"right",right:"left",bottom:"top",top:"bottom"};function pt(t){return t.replace(/left|right|bottom|top/g,(function(t){return ft[t]}))}var gt={start:"end",end:"start"};function mt(t){return t.replace(/start|end/g,(function(t){return gt[t]}))}function yt(t){var e=R(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function vt(t){return K(J(t)).left+yt(t).scrollLeft}function _t(t){var e=X(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function wt(t){return["html","body","#document"].indexOf(M(t))>=0?t.ownerDocument.body:j(t)&&_t(t)?t:wt(Z(t))}function bt(t,e){var n;void 0===e&&(e=[]);var i=wt(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=R(i),o=r?[s].concat(s.visualViewport||[],_t(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(bt(Z(o)))}function Et(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Tt(t,e,n){return e===w?Et(function(t,e){var n=R(t),i=J(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;var l=G();(l||!l&&"fixed"===e)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a+vt(t),y:c}}(t,n)):F(e)?function(t,e){var n=K(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Et(function(t){var e,n=J(t),i=yt(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=B(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=B(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+vt(t),c=-i.scrollTop;return"rtl"===X(r||n).direction&&(a+=B(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(J(t)))}function At(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?U(r):null,o=r?at(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(s){case h:e={x:a,y:n.y-i.height};break;case d:e={x:a,y:n.y+n.height};break;case f:e={x:n.x+n.width,y:c};break;case p:e={x:n.x-i.width,y:c};break;default:e={x:n.x,y:n.y}}var l=s?nt(s):null;if(null!=l){var u="y"===l?"height":"width";switch(o){case y:e[l]=e[l]-(n[u]/2-i[u]/2);break;case v:e[l]=e[l]+(n[u]/2-i[u]/2)}}return e}function It(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.strategy,o=void 0===s?t.strategy:s,a=n.boundary,c=void 0===a?_:a,l=n.rootBoundary,u=void 0===l?w:l,p=n.elementContext,g=void 0===p?b:p,y=n.altBoundary,v=void 0!==y&&y,T=n.padding,A=void 0===T?0:T,I=rt("number"!=typeof A?A:st(A,m)),S=g===b?E:b,C=t.rects.popper,D=t.elements[v?S:g],k=function(t,e,n,i){var r="clippingParents"===e?function(t){var e=bt(Z(t)),n=["absolute","fixed"].indexOf(X(t).position)>=0&&j(t)?et(t):t;return F(n)?e.filter((function(t){return F(t)&&Q(t,n)&&"body"!==M(t)})):[]}(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(e,n){var r=Tt(t,n,i);return e.top=B(r.top,e.top),e.right=q(r.right,e.right),e.bottom=q(r.bottom,e.bottom),e.left=B(r.left,e.left),e}),Tt(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(F(D)?D:D.contextElement||J(t.elements.popper),c,u,o),x=K(t.elements.reference),O=At({reference:x,element:C,strategy:"absolute",placement:r}),N=Et(Object.assign({},C,O)),L=g===b?N:x,P={top:k.top-L.top+I.top,bottom:L.bottom-k.bottom+I.bottom,left:k.left-L.left+I.left,right:L.right-k.right+I.right},R=t.modifiersData.offset;if(g===b&&R){var V=R[r];Object.keys(P).forEach((function(t){var e=[f,d].indexOf(t)>=0?1:-1,n=[h,d].indexOf(t)>=0?"y":"x";P[t]+=V[n]*e}))}return P}const St={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,u=n.boundary,v=n.rootBoundary,_=n.altBoundary,w=n.flipVariations,b=void 0===w||w,E=n.allowedAutoPlacements,I=e.options.placement,S=U(I),C=c||(S!==I&&b?function(t){if(U(t)===g)return[];var e=pt(t);return[mt(t),e,mt(e)]}(I):[pt(I)]),D=[I].concat(C).reduce((function(t,n){return t.concat(U(n)===g?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?A:c,u=at(i),h=u?a?T:T.filter((function(t){return at(t)===u})):m,d=h.filter((function(t){return l.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=It(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[U(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:v,padding:l,flipVariations:b,allowedAutoPlacements:E}):n)}),[]),k=e.rects.reference,x=e.rects.popper,O=new Map,N=!0,L=D[0],P=0;P<D.length;P++){var M=D[P],R=U(M),F=at(M)===y,j=[h,d].indexOf(R)>=0,V=j?"width":"height",$=It(e,{placement:M,boundary:u,rootBoundary:v,altBoundary:_,padding:l}),B=j?F?f:p:F?d:h;k[V]>x[V]&&(B=pt(B));var q=pt(B),z=[];if(s&&z.push($[R]<=0),a&&z.push($[B]<=0,$[q]<=0),z.every((function(t){return t}))){L=M,N=!1;break}O.set(M,z)}if(N)for(var H=function(t){var e=D.find((function(e){var n=O.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return L=e,"break"},G=b?3:1;G>0&&"break"!==H(G);G--);e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ct(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Dt(t){return[h,f,d,p].some((function(e){return t[e]>=0}))}const kt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=It(e,{elementContext:"reference"}),a=It(e,{altBoundary:!0}),c=Ct(o,i),l=Ct(a,r,s),u=Dt(c),h=Dt(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},xt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,o=A.reduce((function(t,n){return t[n]=function(t,e,n){var i=U(t),r=[p,h].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[p,f].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,s),t}),{}),a=o[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=o}},Ot={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=At({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Nt={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,g=n.padding,m=n.tether,v=void 0===m||m,_=n.tetherOffset,w=void 0===_?0:_,b=It(e,{boundary:c,rootBoundary:l,padding:g,altBoundary:u}),E=U(e.placement),T=at(e.placement),A=!T,I=nt(E),S="x"===I?"y":"x",C=e.modifiersData.popperOffsets,D=e.rects.reference,k=e.rects.popper,x="function"==typeof w?w(Object.assign({},e.rects,{placement:e.placement})):w,O="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(C){if(s){var P,M="y"===I?h:p,R="y"===I?d:f,F="y"===I?"height":"width",j=C[I],V=j+b[M],$=j-b[R],z=v?-k[F]/2:0,H=T===y?D[F]:k[F],G=T===y?-k[F]:-D[F],K=e.elements.arrow,Q=v&&K?W(K):{width:0,height:0},X=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Y=X[M],J=X[R],Z=it(0,D[F],Q[F]),tt=A?D[F]/2-z-Z-Y-O.mainAxis:H-Z-Y-O.mainAxis,rt=A?-D[F]/2+z+Z+J+O.mainAxis:G+Z+J+O.mainAxis,st=e.elements.arrow&&et(e.elements.arrow),ot=st?"y"===I?st.clientTop||0:st.clientLeft||0:0,ct=null!=(P=null==N?void 0:N[I])?P:0,lt=j+rt-ct,ut=it(v?q(V,j+tt-ct-ot):V,j,v?B($,lt):$);C[I]=ut,L[I]=ut-j}if(a){var ht,dt="x"===I?h:p,ft="x"===I?d:f,pt=C[S],gt="y"===S?"height":"width",mt=pt+b[dt],yt=pt-b[ft],vt=-1!==[h,p].indexOf(E),_t=null!=(ht=null==N?void 0:N[S])?ht:0,wt=vt?mt:pt-D[gt]-k[gt]-_t+O.altAxis,bt=vt?pt+D[gt]+k[gt]-_t-O.altAxis:yt,Et=v&&vt?function(t,e,n){var i=it(t,e,n);return i>n?n:i}(wt,pt,bt):it(v?wt:mt,pt,v?bt:yt);C[S]=Et,L[S]=Et-pt}e.modifiersData[i]=L}},requiresIfExists:["offset"]};function Lt(t,e,n){void 0===n&&(n=!1);var i,r,s=j(e),o=j(e)&&function(t){var e=t.getBoundingClientRect(),n=z(e.width)/t.offsetWidth||1,i=z(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=J(e),c=K(t,o,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==M(e)||_t(a))&&(l=(i=e)!==R(i)&&j(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:yt(i)),j(e)?((u=K(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=vt(a))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function Pt(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var Mt={placement:"bottom",modifiers:[],strategy:"absolute"};function Rt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Ft(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?Mt:r;return function(t,e,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mt,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:F(t)?bt(t):t.contextElement?bt(t.contextElement):[],popper:bt(e)};var o,l,d=function(t){var e=Pt(t);return P.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),l=o.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var s=r({state:a,name:e,instance:u,options:i});c.push(s||function(){})}})),u.update()},forceUpdate:function(){if(!l){var t=a.elements,e=t.reference,n=t.popper;if(Rt(e,n)){a.rects={reference:Lt(e,et(n),"fixed"===a.options.strategy),popper:W(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,c=void 0===o?{}:o,h=r.name;"function"==typeof s&&(a=s({state:a,options:c,name:h,instance:u})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){h(),l=!0}};if(!Rt(t,e))return u;function h(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var jt=Ft(),Vt=Ft({defaultModifiers:[dt,Ot,ut,$,xt,St,Nt,ot,kt]}),$t=Ft({defaultModifiers:[dt,Ot,ut,$]});const Ut=new Map,Bt={set(t,e,n){Ut.has(t)||Ut.set(t,new Map);const i=Ut.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>Ut.has(t)&&Ut.get(t).get(e)||null,remove(t,e){if(!Ut.has(t))return;const n=Ut.get(t);n.delete(e),0===n.size&&Ut.delete(t)}},qt="transitionend",zt=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),Ht=t=>{t.dispatchEvent(new Event(qt))},Gt=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),Kt=t=>Gt(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(zt(t)):null,Wt=t=>{if(!Gt(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},Qt=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),Xt=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Xt(t.parentNode):null},Yt=()=>{},Jt=t=>{t.offsetHeight},Zt=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,te=[],ee=()=>"rtl"===document.documentElement.dir,ne=t=>{var e;e=()=>{const e=Zt();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(te.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of te)t()})),te.push(e)):e()},ie=(t,e=[],n=t)=>"function"==typeof t?t(...e):n,re=(t,e,n=!0)=>{if(!n)return void ie(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(qt,s),ie(t))};e.addEventListener(qt,s),setTimeout((()=>{r||Ht(e)}),i)},se=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return-1===s?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},oe=/[^.]*(?=\..*)\.|.*/,ae=/\..*/,ce=/::\d+$/,le={};let ue=1;const he={mouseenter:"mouseover",mouseleave:"mouseout"},de=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function fe(t,e){return e&&`${e}::${ue++}`||t.uidEvent||ue++}function pe(t){const e=fe(t);return t.uidEvent=e,le[e]=le[e]||{},le[e]}function ge(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function me(t,e,n){const i="string"==typeof e,r=i?n:e||n;let s=we(t);return de.has(s)||(s=t),[i,r,s]}function ye(t,e,n,i,r){if("string"!=typeof e||!t)return;let[s,o,a]=me(e,n,i);if(e in he){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};o=t(o)}const c=pe(t),l=c[a]||(c[a]={}),u=ge(l,o,s?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=fe(o,e.replace(oe,"")),d=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Ee(r,{delegateTarget:o}),i.oneOff&&be.off(t,r.type,e,n),n.apply(o,[r])}}(t,n,o):function(t,e){return function n(i){return Ee(i,{delegateTarget:t}),n.oneOff&&be.off(t,i.type,e),e.apply(t,[i])}}(t,o);d.delegationSelector=s?n:null,d.callable=o,d.oneOff=r,d.uidEvent=h,l[h]=d,t.addEventListener(a,d,s)}function ve(t,e,n,i,r){const s=ge(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function _e(t,e,n,i){const r=e[n]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&ve(t,e,n,o.callable,o.delegationSelector)}function we(t){return t=t.replace(ae,""),he[t]||t}const be={on(t,e,n,i){ye(t,e,n,i,!1)},one(t,e,n,i){ye(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=me(e,n,i),a=o!==e,c=pe(t),l=c[o]||{},u=e.startsWith(".");if(void 0===s){if(u)for(const n of Object.keys(c))_e(t,c,n,e.slice(1));for(const[n,i]of Object.entries(l)){const r=n.replace(ce,"");a&&!e.includes(r)||ve(t,c,o,i.callable,i.delegationSelector)}}else{if(!Object.keys(l).length)return;ve(t,c,o,s,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=Zt();let r=null,s=!0,o=!0,a=!1;e!==we(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),s=!r.isPropagationStopped(),o=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());const c=Ee(new Event(e,{bubbles:s,cancelable:!0}),n);return a&&c.preventDefault(),o&&t.dispatchEvent(c),c.defaultPrevented&&r&&r.preventDefault(),c}};function Ee(t,e={}){for(const[n,i]of Object.entries(e))try{t[n]=i}catch(e){Object.defineProperty(t,n,{configurable:!0,get:()=>i})}return t}function Te(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function Ae(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const Ie={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Ae(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Ae(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=Te(t.dataset[i])}return e},getDataAttribute:(t,e)=>Te(t.getAttribute(`data-bs-${Ae(e)}`))};class Se{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Gt(e)?Ie.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...Gt(e)?Ie.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,r]of Object.entries(e)){const e=t[i],s=Gt(e)?"element":null==(n=e)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${r}".`)}var n}}class Ce extends Se{constructor(t,e){super(),(t=Kt(t))&&(this._element=t,this._config=this._getConfig(e),Bt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Bt.remove(this._element,this.constructor.DATA_KEY),be.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){re(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Bt.get(Kt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const De=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e?e.split(",").map((t=>zt(t))).join(","):null},ke={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!Qt(t)&&Wt(t)))},getSelectorFromElement(t){const e=De(t);return e&&ke.findOne(e)?e:null},getElementFromSelector(t){const e=De(t);return e?ke.findOne(e):null},getMultipleElementsFromSelector(t){const e=De(t);return e?ke.find(e):[]}},xe=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;be.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Qt(this))return;const r=ke.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))},Oe=".bs.alert",Ne=`close${Oe}`,Le=`closed${Oe}`;class Pe extends Ce{static get NAME(){return"alert"}close(){if(be.trigger(this._element,Ne).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),be.trigger(this._element,Le),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Pe.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}xe(Pe,"close"),ne(Pe);const Me='[data-bs-toggle="button"]';class Re extends Ce{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=Re.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}be.on(document,"click.bs.button.data-api",Me,(t=>{t.preventDefault();const e=t.target.closest(Me);Re.getOrCreateInstance(e).toggle()})),ne(Re);const Fe=".bs.swipe",je=`touchstart${Fe}`,Ve=`touchmove${Fe}`,$e=`touchend${Fe}`,Ue=`pointerdown${Fe}`,Be=`pointerup${Fe}`,qe={endCallback:null,leftCallback:null,rightCallback:null},ze={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class He extends Se{constructor(t,e){super(),this._element=t,t&&He.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return qe}static get DefaultType(){return ze}static get NAME(){return"swipe"}dispose(){be.off(this._element,Fe)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),ie(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&ie(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(be.on(this._element,Ue,(t=>this._start(t))),be.on(this._element,Be,(t=>this._end(t))),this._element.classList.add("pointer-event")):(be.on(this._element,je,(t=>this._start(t))),be.on(this._element,Ve,(t=>this._move(t))),be.on(this._element,$e,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ge=".bs.carousel",Ke=".data-api",We="next",Qe="prev",Xe="left",Ye="right",Je=`slide${Ge}`,Ze=`slid${Ge}`,tn=`keydown${Ge}`,en=`mouseenter${Ge}`,nn=`mouseleave${Ge}`,rn=`dragstart${Ge}`,sn=`load${Ge}${Ke}`,on=`click${Ge}${Ke}`,an="carousel",cn="active",ln=".active",un=".carousel-item",hn=ln+un,dn={ArrowLeft:Ye,ArrowRight:Xe},fn={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},pn={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class gn extends Ce{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ke.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===an&&this.cycle()}static get Default(){return fn}static get DefaultType(){return pn}static get NAME(){return"carousel"}next(){this._slide(We)}nextWhenVisible(){!document.hidden&&Wt(this._element)&&this.next()}prev(){this._slide(Qe)}pause(){this._isSliding&&Ht(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?be.one(this._element,Ze,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void be.one(this._element,Ze,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?We:Qe;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&be.on(this._element,tn,(t=>this._keydown(t))),"hover"===this._config.pause&&(be.on(this._element,en,(()=>this.pause())),be.on(this._element,nn,(()=>this._maybeEnableCycle()))),this._config.touch&&He.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of ke.find(".carousel-item img",this._element))be.on(t,rn,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(Xe)),rightCallback:()=>this._slide(this._directionToOrder(Ye)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new He(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=dn[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=ke.findOne(ln,this._indicatorsElement);e.classList.remove(cn),e.removeAttribute("aria-current");const n=ke.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(cn),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===We,r=e||se(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=e=>be.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s});if(o(Je).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const c=i?"carousel-item-start":"carousel-item-end",l=i?"carousel-item-next":"carousel-item-prev";r.classList.add(l),Jt(r),n.classList.add(c),r.classList.add(c),this._queueCallback((()=>{r.classList.remove(c,l),r.classList.add(cn),n.classList.remove(cn,l,c),this._isSliding=!1,o(Ze)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ke.findOne(hn,this._element)}_getItems(){return ke.find(un,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ee()?t===Xe?Qe:We:t===Xe?We:Qe}_orderToDirection(t){return ee()?t===Qe?Xe:Ye:t===Qe?Ye:Xe}static jQueryInterface(t){return this.each((function(){const e=gn.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}be.on(document,on,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=ke.getElementFromSelector(this);if(!e||!e.classList.contains(an))return;t.preventDefault();const n=gn.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===Ie.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),be.on(window,sn,(()=>{const t=ke.find('[data-bs-ride="carousel"]');for(const e of t)gn.getOrCreateInstance(e)})),ne(gn);const mn=".bs.collapse",yn=`show${mn}`,vn=`shown${mn}`,_n=`hide${mn}`,wn=`hidden${mn}`,bn=`click${mn}.data-api`,En="show",Tn="collapse",An="collapsing",In=`:scope .${Tn} .${Tn}`,Sn='[data-bs-toggle="collapse"]',Cn={parent:null,toggle:!0},Dn={parent:"(null|element)",toggle:"boolean"};class kn extends Ce{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=ke.find(Sn);for(const t of n){const e=ke.getSelectorFromElement(t),n=ke.find(e).filter((t=>t===this._element));null!==e&&n.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Cn}static get DefaultType(){return Dn}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>kn.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(be.trigger(this._element,yn).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(Tn),this._element.classList.add(An),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(An),this._element.classList.add(Tn,En),this._element.style[e]="",be.trigger(this._element,vn)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(be.trigger(this._element,_n).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Jt(this._element),this._element.classList.add(An),this._element.classList.remove(Tn,En);for(const t of this._triggerArray){const e=ke.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(An),this._element.classList.add(Tn),be.trigger(this._element,wn)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(En)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=Kt(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Sn);for(const e of t){const t=ke.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=ke.find(In,this._config.parent);return ke.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=kn.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}be.on(document,bn,Sn,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of ke.getMultipleElementsFromSelector(this))kn.getOrCreateInstance(t,{toggle:!1}).toggle()})),ne(kn);const xn="dropdown",On=".bs.dropdown",Nn=".data-api",Ln="ArrowUp",Pn="ArrowDown",Mn=`hide${On}`,Rn=`hidden${On}`,Fn=`show${On}`,jn=`shown${On}`,Vn=`click${On}${Nn}`,$n=`keydown${On}${Nn}`,Un=`keyup${On}${Nn}`,Bn="show",qn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',zn=`${qn}.${Bn}`,Hn=".dropdown-menu",Gn=ee()?"top-end":"top-start",Kn=ee()?"top-start":"top-end",Wn=ee()?"bottom-end":"bottom-start",Qn=ee()?"bottom-start":"bottom-end",Xn=ee()?"left-start":"right-start",Yn=ee()?"right-start":"left-start",Jn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Zn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ti extends Ce{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=ke.next(this._element,Hn)[0]||ke.prev(this._element,Hn)[0]||ke.findOne(Hn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Jn}static get DefaultType(){return Zn}static get NAME(){return xn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Qt(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!be.trigger(this._element,Fn,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))be.on(t,"mouseover",Yt);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Bn),this._element.classList.add(Bn),be.trigger(this._element,jn,t)}}hide(){if(Qt(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!be.trigger(this._element,Mn,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))be.off(t,"mouseover",Yt);this._popper&&this._popper.destroy(),this._menu.classList.remove(Bn),this._element.classList.remove(Bn),this._element.setAttribute("aria-expanded","false"),Ie.removeDataAttribute(this._menu,"popper"),be.trigger(this._element,Rn,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!Gt(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${xn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===e)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:Gt(this._config.reference)?t=Kt(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=Vt(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Bn)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return Xn;if(t.classList.contains("dropstart"))return Yn;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Kn:Gn:e?Qn:Wn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Ie.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...ie(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=ke.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>Wt(t)));n.length&&se(n,e,t===Pn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=ti.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=ke.find(zn);for(const n of e){const e=ti.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const s={relatedTarget:e._element};"click"===t.type&&(s.clickEvent=t),e._completeHide(s)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[Ln,Pn].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(qn)?this:ke.prev(this,qn)[0]||ke.next(this,qn)[0]||ke.findOne(qn,t.delegateTarget.parentNode),s=ti.getOrCreateInstance(r);if(i)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),r.focus())}}be.on(document,$n,qn,ti.dataApiKeydownHandler),be.on(document,$n,Hn,ti.dataApiKeydownHandler),be.on(document,Vn,ti.clearMenus),be.on(document,Un,ti.clearMenus),be.on(document,Vn,qn,(function(t){t.preventDefault(),ti.getOrCreateInstance(this).toggle()})),ne(ti);const ei="backdrop",ni="show",ii=`mousedown.bs.${ei}`,ri={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},si={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class oi extends Se{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ri}static get DefaultType(){return si}static get NAME(){return ei}show(t){if(!this._config.isVisible)return void ie(t);this._append();const e=this._getElement();this._config.isAnimated&&Jt(e),e.classList.add(ni),this._emulateAnimation((()=>{ie(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(ni),this._emulateAnimation((()=>{this.dispose(),ie(t)}))):ie(t)}dispose(){this._isAppended&&(be.off(this._element,ii),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Kt(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),be.on(t,ii,(()=>{ie(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){re(t,this._getElement(),this._config.isAnimated)}}const ai=".bs.focustrap",ci=`focusin${ai}`,li=`keydown.tab${ai}`,ui="backward",hi={autofocus:!0,trapElement:null},di={autofocus:"boolean",trapElement:"element"};class fi extends Se{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return hi}static get DefaultType(){return di}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),be.off(document,ai),be.on(document,ci,(t=>this._handleFocusin(t))),be.on(document,li,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,be.off(document,ai))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=ke.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===ui?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?ui:"forward")}}const pi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gi=".sticky-top",mi="padding-right",yi="margin-right";class vi{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,mi,(e=>e+t)),this._setElementAttributes(pi,mi,(e=>e+t)),this._setElementAttributes(gi,yi,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,mi),this._resetElementAttributes(pi,mi),this._resetElementAttributes(gi,yi)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Ie.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Ie.getDataAttribute(t,e);null!==n?(Ie.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(Gt(t))e(t);else for(const n of ke.find(t,this._element))e(n)}}const _i=".bs.modal",wi=`hide${_i}`,bi=`hidePrevented${_i}`,Ei=`hidden${_i}`,Ti=`show${_i}`,Ai=`shown${_i}`,Ii=`resize${_i}`,Si=`click.dismiss${_i}`,Ci=`mousedown.dismiss${_i}`,Di=`keydown.dismiss${_i}`,ki=`click${_i}.data-api`,xi="modal-open",Oi="show",Ni="modal-static",Li={backdrop:!0,focus:!0,keyboard:!0},Pi={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Mi extends Ce{constructor(t,e){super(t,e),this._dialog=ke.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new vi,this._addEventListeners()}static get Default(){return Li}static get DefaultType(){return Pi}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||be.trigger(this._element,Ti,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xi),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(be.trigger(this._element,wi).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Oi),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){be.off(window,_i),be.off(this._dialog,_i),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new oi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new fi({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=ke.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),Jt(this._element),this._element.classList.add(Oi),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,be.trigger(this._element,Ai,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){be.on(this._element,Di,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),be.on(window,Ii,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),be.on(this._element,Ci,(t=>{be.one(this._element,Si,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(xi),this._resetAdjustments(),this._scrollBar.reset(),be.trigger(this._element,Ei)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(be.trigger(this._element,bi).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Ni)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Ni),this._queueCallback((()=>{this._element.classList.remove(Ni),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=ee()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=ee()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Mi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}be.on(document,ki,'[data-bs-toggle="modal"]',(function(t){const e=ke.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),be.one(e,Ti,(t=>{t.defaultPrevented||be.one(e,Ei,(()=>{Wt(this)&&this.focus()}))}));const n=ke.findOne(".modal.show");n&&Mi.getInstance(n).hide(),Mi.getOrCreateInstance(e).toggle(this)})),xe(Mi),ne(Mi);const Ri=".bs.offcanvas",Fi=".data-api",ji=`load${Ri}${Fi}`,Vi="show",$i="showing",Ui="hiding",Bi=".offcanvas.show",qi=`show${Ri}`,zi=`shown${Ri}`,Hi=`hide${Ri}`,Gi=`hidePrevented${Ri}`,Ki=`hidden${Ri}`,Wi=`resize${Ri}`,Qi=`click${Ri}${Fi}`,Xi=`keydown.dismiss${Ri}`,Yi={backdrop:!0,keyboard:!0,scroll:!1},Ji={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Zi extends Ce{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Yi}static get DefaultType(){return Ji}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||be.trigger(this._element,qi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new vi).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($i),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Vi),this._element.classList.remove($i),be.trigger(this._element,zi,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(be.trigger(this._element,Hi).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ui),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Vi,Ui),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new vi).reset(),be.trigger(this._element,Ki)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new oi({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():be.trigger(this._element,Gi)}:null})}_initializeFocusTrap(){return new fi({trapElement:this._element})}_addEventListeners(){be.on(this._element,Xi,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():be.trigger(this._element,Gi))}))}static jQueryInterface(t){return this.each((function(){const e=Zi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}be.on(document,Qi,'[data-bs-toggle="offcanvas"]',(function(t){const e=ke.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Qt(this))return;be.one(e,Ki,(()=>{Wt(this)&&this.focus()}));const n=ke.findOne(Bi);n&&n!==e&&Zi.getInstance(n).hide(),Zi.getOrCreateInstance(e).toggle(this)})),be.on(window,ji,(()=>{for(const t of ke.find(Bi))Zi.getOrCreateInstance(t).show()})),be.on(window,Wi,(()=>{for(const t of ke.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Zi.getOrCreateInstance(t).hide()})),xe(Zi),ne(Zi);const tr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},er=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),nr=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ir=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!er.has(n)||Boolean(nr.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},rr={allowList:tr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},sr={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},or={entry:"(string|element|function|null)",selector:"(string|element)"};class ar extends Se{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return rr}static get DefaultType(){return sr}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,n]of Object.entries(this._config.content))this._setContent(t,n,e);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},or)}_setContent(t,e,n){const i=ke.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?Gt(e)?this._putElementInTemplate(Kt(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const t of r){const n=t.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){t.remove();continue}const i=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[n]||[]);for(const e of i)ir(e,r)||t.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return ie(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const cr=new Set(["sanitize","allowList","sanitizeFn"]),lr="fade",ur="show",hr=".modal",dr="hide.bs.modal",fr="hover",pr="focus",gr={AUTO:"auto",TOP:"top",RIGHT:ee()?"left":"right",BOTTOM:"bottom",LEFT:ee()?"right":"left"},mr={allowList:tr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},yr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class vr extends Ce{constructor(t,n){if(void 0===e)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return mr}static get DefaultType(){return yr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),be.off(this._element.closest(hr),dr,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=be.trigger(this._element,this.constructor.eventName("show")),e=(Xt(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),be.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(ur),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))be.on(t,"mouseover",Yt);this._queueCallback((()=>{be.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!be.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ur),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))be.off(t,"mouseover",Yt);this._activeTrigger.click=!1,this._activeTrigger[pr]=!1,this._activeTrigger[fr]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),be.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(lr,ur),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(lr),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ar({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(lr)}_isShown(){return this.tip&&this.tip.classList.contains(ur)}_createPopper(t){const e=ie(this._config.placement,[this,t,this._element]),n=gr[e.toUpperCase()];return Vt(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return ie(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...ie(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)be.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===fr?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===fr?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");be.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?pr:fr]=!0,e._enter()})),be.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?pr:fr]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},be.on(this._element.closest(hr),dr,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Ie.getDataAttributes(this._element);for(const t of Object.keys(e))cr.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:Kt(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=vr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ne(vr);const _r={...vr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},wr={...vr.DefaultType,content:"(null|string|element|function)"};class br extends vr{static get Default(){return _r}static get DefaultType(){return wr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=br.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ne(br);const Er=".bs.scrollspy",Tr=`activate${Er}`,Ar=`click${Er}`,Ir=`load${Er}.data-api`,Sr="active",Cr="[href]",Dr=".nav-link",kr=`${Dr}, .nav-item > ${Dr}, .list-group-item`,xr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Or={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Nr extends Ce{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return xr}static get DefaultType(){return Or}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Kt(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(be.off(this._config.target,Ar),be.on(this._config.target,Ar,Cr,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}const t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(s),!i)return}else r||t||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=ke.find(Cr,this._config.target);for(const e of t){if(!e.hash||Qt(e))continue;const t=ke.findOne(decodeURI(e.hash),this._element);Wt(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Sr),this._activateParents(t),be.trigger(this._element,Tr,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))ke.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Sr);else for(const e of ke.parents(t,".nav, .list-group"))for(const t of ke.prev(e,kr))t.classList.add(Sr)}_clearActiveClass(t){t.classList.remove(Sr);const e=ke.find(`${Cr}.${Sr}`,t);for(const t of e)t.classList.remove(Sr)}static jQueryInterface(t){return this.each((function(){const e=Nr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}be.on(window,Ir,(()=>{for(const t of ke.find('[data-bs-spy="scroll"]'))Nr.getOrCreateInstance(t)})),ne(Nr);const Lr=".bs.tab",Pr=`hide${Lr}`,Mr=`hidden${Lr}`,Rr=`show${Lr}`,Fr=`shown${Lr}`,jr=`click${Lr}`,Vr=`keydown${Lr}`,$r=`load${Lr}`,Ur="ArrowLeft",Br="ArrowRight",qr="ArrowUp",zr="ArrowDown",Hr="Home",Gr="End",Kr="active",Wr="fade",Qr="show",Xr=".dropdown-toggle",Yr=`:not(${Xr})`,Jr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Zr=`.nav-link${Yr}, .list-group-item${Yr}, [role="tab"]${Yr}, ${Jr}`,ts=`.${Kr}[data-bs-toggle="tab"], .${Kr}[data-bs-toggle="pill"], .${Kr}[data-bs-toggle="list"]`;class es extends Ce{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),be.on(this._element,Vr,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?be.trigger(e,Pr,{relatedTarget:t}):null;be.trigger(t,Rr,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(Kr),this._activate(ke.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),be.trigger(t,Fr,{relatedTarget:e})):t.classList.add(Qr)}),t,t.classList.contains(Wr)))}_deactivate(t,e){t&&(t.classList.remove(Kr),t.blur(),this._deactivate(ke.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),be.trigger(t,Mr,{relatedTarget:e})):t.classList.remove(Qr)}),t,t.classList.contains(Wr)))}_keydown(t){if(![Ur,Br,qr,zr,Hr,Gr].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!Qt(t)));let n;if([Hr,Gr].includes(t.key))n=e[t.key===Hr?0:e.length-1];else{const i=[Br,zr].includes(t.key);n=se(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),es.getOrCreateInstance(n).show())}_getChildren(){return ke.find(Zr,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=ke.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=ke.findOne(t,n);r&&r.classList.toggle(i,e)};i(Xr,Kr),i(".dropdown-menu",Qr),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Kr)}_getInnerElement(t){return t.matches(Zr)?t:ke.findOne(Zr,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=es.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}be.on(document,jr,Jr,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),Qt(this)||es.getOrCreateInstance(this).show()})),be.on(window,$r,(()=>{for(const t of ke.find(ts))es.getOrCreateInstance(t)})),ne(es);const ns=".bs.toast",is=`mouseover${ns}`,rs=`mouseout${ns}`,ss=`focusin${ns}`,os=`focusout${ns}`,as=`hide${ns}`,cs=`hidden${ns}`,ls=`show${ns}`,us=`shown${ns}`,hs="hide",ds="show",fs="showing",ps={animation:"boolean",autohide:"boolean",delay:"number"},gs={animation:!0,autohide:!0,delay:5e3};class ms extends Ce{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return gs}static get DefaultType(){return ps}static get NAME(){return"toast"}show(){be.trigger(this._element,ls).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(hs),Jt(this._element),this._element.classList.add(ds,fs),this._queueCallback((()=>{this._element.classList.remove(fs),be.trigger(this._element,us),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(be.trigger(this._element,as).defaultPrevented||(this._element.classList.add(fs),this._queueCallback((()=>{this._element.classList.add(hs),this._element.classList.remove(fs,ds),be.trigger(this._element,cs)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ds),super.dispose()}isShown(){return this._element.classList.contains(ds)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){be.on(this._element,is,(t=>this._onInteraction(t,!0))),be.on(this._element,rs,(t=>this._onInteraction(t,!1))),be.on(this._element,ss,(t=>this._onInteraction(t,!0))),be.on(this._element,os,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=ms.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}xe(ms),ne(ms);const ys=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},vs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ys(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new _s;const c=r<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ws=function(t){return function(t){const e=ys(t);return vs.encodeByteArray(e,!0)}(t).replace(/\./g,"")},bs=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return vs.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Es=()=>{var t;return null===(t=bs())||void 0===t?void 0:t.config};class Ts{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function As(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Is(){try{return"object"==typeof indexedDB}catch(t){return!1}}function Ss(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class Cs extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ds.prototype.create)}}class Ds{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(ks,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Cs(i,o,n)}}const ks=/\{\$([^}]+)}/g;function xs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(Os(n)&&Os(s)){if(!xs(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function Os(t){return null!==t&&"object"==typeof t}const Ns=1e3,Ls=2,Ps=144e5,Ms=.5;function Rs(t,e=Ns,n=Ls){const i=e*Math.pow(n,t),r=Math.round(Ms*i*(Math.random()-.5)*2);return Math.min(Ps,i+r)}function Fs(t){return t&&t._delegate?t._delegate:t}class js{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Vs="[DEFAULT]";class $s{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Ts;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=Vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=Vs){return this.instances.has(t)}getOptions(t=Vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Vs?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=Vs){return this.component?this.component.multipleInstances?t:Vs:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Us{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new $s(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const Bs=[];var qs,zs;(zs=qs||(qs={}))[zs.DEBUG=0]="DEBUG",zs[zs.VERBOSE=1]="VERBOSE",zs[zs.INFO=2]="INFO",zs[zs.WARN=3]="WARN",zs[zs.ERROR=4]="ERROR",zs[zs.SILENT=5]="SILENT";const Hs={debug:qs.DEBUG,verbose:qs.VERBOSE,info:qs.INFO,warn:qs.WARN,error:qs.ERROR,silent:qs.SILENT},Gs=qs.INFO,Ks={[qs.DEBUG]:"log",[qs.VERBOSE]:"log",[qs.INFO]:"info",[qs.WARN]:"warn",[qs.ERROR]:"error"},Ws=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=Ks[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class Qs{constructor(t){this.name=t,this._logLevel=Gs,this._logHandler=Ws,this._userLogHandler=null,Bs.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qs))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Hs[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qs.DEBUG,...t),this._logHandler(this,qs.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qs.VERBOSE,...t),this._logHandler(this,qs.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qs.INFO,...t),this._logHandler(this,qs.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qs.WARN,...t),this._logHandler(this,qs.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qs.ERROR,...t),this._logHandler(this,qs.ERROR,...t)}}const Xs=(t,e)=>e.some((e=>t instanceof e));let Ys,Js;const Zs=new WeakMap,to=new WeakMap,eo=new WeakMap,no=new WeakMap,io=new WeakMap;let ro={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return to.get(t);if("objectStoreNames"===e)return t.objectStoreNames||eo.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function so(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Js||(Js=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ao(this),t),oo(Zs.get(this))}:function(...t){return oo(e.apply(ao(this),t))}:function(t,...n){const i=e.call(ao(this),t,...n);return eo.set(i,t.sort?t.sort():[t]),oo(i)}:(t instanceof IDBTransaction&&function(t){if(to.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));to.set(t,e)}(t),Xs(t,Ys||(Ys=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,ro):t);var e}function oo(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(oo(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Zs.set(e,t)})).catch((()=>{})),io.set(e,t),e}(t);if(no.has(t))return no.get(t);const e=so(t);return e!==t&&(no.set(t,e),io.set(e,t)),e}const ao=t=>io.get(t);function co(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=oo(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(oo(o.result),t.oldVersion,t.newVersion,oo(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const lo=["get","getKey","getAll","getAllKeys","count"],uo=["put","add","delete","clear"],ho=new Map;function fo(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ho.get(e))return ho.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=uo.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!lo.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return ho.set(e,s),s}var po;po=ro,ro={...po,get:(t,e,n)=>fo(t,e)||po.get(t,e,n),has:(t,e)=>!!fo(t,e)||po.has(t,e)};class go{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const mo="@firebase/app",yo="0.9.28",vo=new Qs("@firebase/app"),_o="[DEFAULT]",wo={[mo]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bo=new Map,Eo=new Map;function To(t,e){try{t.container.addComponent(e)}catch(n){vo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ao(t){const e=t.name;if(Eo.has(e))return vo.debug(`There were multiple attempts to register component ${e}.`),!1;Eo.set(e,t);for(const e of bo.values())To(e,t);return!0}function Io(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const So=new Ds("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Co{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new js("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw So.create("app-deleted",{appName:this._name})}}function Do(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:_o,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw So.create("bad-app-name",{appName:String(r)});if(n||(n=Es()),!n)throw So.create("no-options");const s=bo.get(r);if(s){if(xs(n,s.options)&&xs(i,s.config))return s;throw So.create("duplicate-app",{appName:r})}const o=new Us(r);for(const t of Eo.values())o.addComponent(t);const a=new Co(n,i,o);return bo.set(r,a),a}function ko(t=_o){const e=bo.get(t);if(!e&&t===_o&&Es())return Do();if(!e)throw So.create("no-app",{appName:t});return e}function xo(t,e,n){var i;let r=null!==(i=wo[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void vo.warn(t.join(" "))}Ao(new js(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const Oo="firebase-heartbeat-database",No=1,Lo="firebase-heartbeat-store";let Po=null;function Mo(){return Po||(Po=co(Oo,No,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Lo)}catch(t){console.warn(t)}}}).catch((t=>{throw So.create("idb-open",{originalErrorMessage:t.message})}))),Po}async function Ro(t,e){try{const n=(await Mo()).transaction(Lo,"readwrite"),i=n.objectStore(Lo);await i.put(e,Fo(t)),await n.done}catch(t){if(t instanceof Cs)vo.warn(t.message);else{const e=So.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});vo.warn(e.message)}}}function Fo(t){return`${t.name}!${t.options.appId}`}class jo{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $o(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vo();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Vo(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Uo(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Uo(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=ws(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Vo(){return(new Date).toISOString().substring(0,10)}class $o{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Is()&&Ss().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Mo()).transaction(Lo),n=await e.objectStore(Lo).get(Fo(t));return await e.done,n}catch(t){if(t instanceof Cs)vo.warn(t.message);else{const e=So.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});vo.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ro(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ro(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Uo(t){return ws(JSON.stringify({version:2,heartbeats:t})).length}Ao(new js("platform-logger",(t=>new go(t)),"PRIVATE")),Ao(new js("heartbeat",(t=>new jo(t)),"PRIVATE")),xo(mo,yo,""),xo(mo,yo,"esm2017"),xo("fire-js","");var Bo,qo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zo={},Ho=Ho||{},Go=qo||self;function Ko(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Wo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qo="closure_uid_"+(1e9*Math.random()>>>0),Xo=0;function Yo(t,e,n){return t.call.apply(t.bind,arguments)}function Jo(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Zo(t,e,n){return(Zo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yo:Jo).apply(null,arguments)}function ta(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ea(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function na(){this.s=this.s,this.o=this.o}na.prototype.s=!1,na.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Qo)&&t[Qo]||(t[Qo]=++Xo))},na.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ia=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ra(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function sa(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(Ko(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function oa(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}oa.prototype.h=function(){this.defaultPrevented=!0};var aa=function(){if(!Go.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Go.addEventListener("test",t,e),Go.removeEventListener("test",t,e)}catch(t){}return t}();function ca(t){return/^[\s\xa0]*$/.test(t)}function la(){var t=Go.navigator;return t&&(t=t.userAgent)?t:""}function ua(t){return-1!=la().indexOf(t)}function ha(t){return ha[" "](t),t}ha[" "]=function(){};var da,fa,pa,ga=ua("Opera"),ma=ua("Trident")||ua("MSIE"),ya=ua("Edge"),va=ya||ma,_a=ua("Gecko")&&!(-1!=la().toLowerCase().indexOf("webkit")&&!ua("Edge"))&&!(ua("Trident")||ua("MSIE"))&&!ua("Edge"),wa=-1!=la().toLowerCase().indexOf("webkit")&&!ua("Edge");function ba(){var t=Go.document;return t?t.documentMode:void 0}t:{var Ea="",Ta=(fa=la(),_a?/rv:([^\);]+)(\)|;)/.exec(fa):ya?/Edge\/([\d\.]+)/.exec(fa):ma?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fa):wa?/WebKit\/(\S+)/.exec(fa):ga?/(?:Version)[ \/]?(\S+)/.exec(fa):void 0);if(Ta&&(Ea=Ta?Ta[1]:""),ma){var Aa=ba();if(null!=Aa&&Aa>parseFloat(Ea)){da=String(Aa);break t}}da=Ea}Go.document&&ma?pa=ba()||parseInt(da,10)||void 0:pa=void 0;var Ia=pa;function Sa(t,e){if(oa.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_a){t:{try{ha(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ca[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Sa.$.h.call(this)}}ea(Sa,oa);var Ca={2:"touch",3:"pen",4:"mouse"};Sa.prototype.h=function(){Sa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Da="closure_listenable_"+(1e6*Math.random()|0),ka=0;function xa(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++ka,this.fa=this.ia=!1}function Oa(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Na(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function La(t){const e={};for(const n in t)e[n]=t[n];return e}const Pa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ma(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Pa.length;e++)n=Pa[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ra(t){this.src=t,this.g={},this.h=0}function Fa(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=ia(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Oa(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ja(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Ra.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ja(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new xa(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var Va="closure_lm_"+(1e6*Math.random()|0),$a={};function Ua(t,e,n,i,r){if(i&&i.once)return qa(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ua(t,e[s],n,i,r);return null}return n=Xa(n),t&&t[Da]?t.O(e,n,Wo(i)?!!i.capture:!!i,r):Ba(t,e,n,!1,i,r)}function Ba(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Wo(r)?!!r.capture:!!r,a=Wa(t);if(a||(t[Va]=a=new Ra(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=Ka;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)aa||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ga(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function qa(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)qa(t,e[s],n,i,r);return null}return n=Xa(n),t&&t[Da]?t.P(e,n,Wo(i)?!!i.capture:!!i,r):Ba(t,e,n,!0,i,r)}function za(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)za(t,e[s],n,i,r);else i=Wo(i)?!!i.capture:!!i,n=Xa(n),t&&t[Da]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ja(s=t.g[e],n,i,r))&&(Oa(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Wa(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ja(e,n,i,r)),(n=-1<t?e[t]:null)&&Ha(n))}function Ha(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Da])Fa(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ga(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Wa(e))?(Fa(n,t),0==n.h&&(n.src=null,e[Va]=null)):Oa(t)}}}function Ga(t){return t in $a?$a[t]:$a[t]="on"+t}function Ka(t,e){if(t.fa)t=!0;else{e=new Sa(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Ha(t),t=n.call(i,e)}return t}function Wa(t){return(t=t[Va])instanceof Ra?t:null}var Qa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xa(t){return"function"==typeof t?t:(t[Qa]||(t[Qa]=function(e){return t.handleEvent(e)}),t[Qa])}function Ya(){na.call(this),this.i=new Ra(this),this.S=this,this.J=null}function Ja(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new oa(e,t);else if(e instanceof oa)e.target=e.target||t;else{var r=e;Ma(e=new oa(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Za(o,i,!0,e)&&r}if(r=Za(o=e.g=t,i,!0,e)&&r,r=Za(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=Za(o=e.g=n[s],i,!1,e)&&r}function Za(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Fa(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}ea(Ya,na),Ya.prototype[Da]=!0,Ya.prototype.removeEventListener=function(t,e,n,i){za(this,t,e,n,i)},Ya.prototype.N=function(){if(Ya.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Oa(n[i]);delete e.g[t],e.h--}}this.J=null},Ya.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Ya.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var tc=Go.JSON.stringify;function ec(){var t=cc;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var nc=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new ic),(t=>t.reset()));class ic{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function rc(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function sc(t){Go.setTimeout((()=>{throw t}),0)}let oc,ac=!1,cc=new class{constructor(){this.h=this.g=null}add(t,e){const n=nc.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},lc=()=>{const t=Go.Promise.resolve(void 0);oc=()=>{t.then(uc)}};var uc=()=>{for(var t;t=ec();){try{t.h.call(t.g)}catch(t){sc(t)}var e=nc;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ac=!1};function hc(t,e){Ya.call(this),this.h=t||1,this.g=e||Go,this.j=Zo(this.qb,this),this.l=Date.now()}function dc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function fc(t,e,n){if("function"==typeof t)n&&(t=Zo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Zo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Go.setTimeout(t,e||0)}function pc(t){t.g=fc((()=>{t.g=null,t.i&&(t.i=!1,pc(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ea(hc,Ya),(Bo=hc.prototype).ga=!1,Bo.T=null,Bo.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ja(this,"tick"),this.ga&&(dc(this),this.start()))}},Bo.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bo.N=function(){hc.$.N.call(this),dc(this),delete this.g};class gc extends na{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:pc(this)}N(){super.N(),this.g&&(Go.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mc(t){na.call(this),this.h=t,this.g={}}ea(mc,na);var yc=[];function vc(t,e,n,i){Array.isArray(n)||(n&&(yc[0]=n.toString()),n=yc);for(var r=0;r<n.length;r++){var s=Ua(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function _c(t){Na(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ha(t)}),t),t.g={}}function wc(){this.g=!0}function bc(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return tc(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}mc.prototype.N=function(){mc.$.N.call(this),_c(this)},mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wc.prototype.Ea=function(){this.g=!1},wc.prototype.info=function(){};var Ec={},Tc=null;function Ac(){return Tc=Tc||new Ya}function Ic(t){oa.call(this,Ec.Ta,t)}function Sc(t){const e=Ac();Ja(e,new Ic(e))}function Cc(t,e){oa.call(this,Ec.STAT_EVENT,t),this.stat=e}function Dc(t){const e=Ac();Ja(e,new Cc(e,t))}function kc(t,e){oa.call(this,Ec.Ua,t),this.size=e}function xc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Go.setTimeout((function(){t()}),e)}Ec.Ta="serverreachability",ea(Ic,oa),Ec.STAT_EVENT="statevent",ea(Cc,oa),Ec.Ua="timingevent",ea(kc,oa);var Oc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Nc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lc(){}function Pc(t){return t.h||(t.h=t.i())}function Mc(){}Lc.prototype.h=null;var Rc,Fc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jc(){oa.call(this,"d")}function Vc(){oa.call(this,"c")}function $c(){}function Uc(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new mc(this),this.P=qc,t=va?125:void 0,this.V=new hc(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bc}function Bc(){this.i=null,this.g="",this.h=!1}ea(jc,oa),ea(Vc,oa),ea($c,Lc),$c.prototype.g=function(){return new XMLHttpRequest},$c.prototype.i=function(){return{}},Rc=new $c;var qc=45e3,zc={},Hc={};function Gc(t,e,n){t.L=1,t.A=hl(ol(e)),t.u=n,t.S=!0,Kc(t,null)}function Kc(t,e){t.G=Date.now(),Yc(t),t.B=ol(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),Al(n.i,"t",i),t.o=0,n=t.l.J,t.h=new Bc,t.g=Au(t.l,n?e:null,!t.u),0<t.O&&(t.M=new gc(Zo(t.Pa,t,t.g),t.O)),vc(t.U,t.g,"readystatechange",t.nb),e=t.I?La(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Sc(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Wc(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Qc(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Xc(t,n),i==Hc){4==e&&(t.s=4,Dc(14),r=!1),bc(t.j,t.m,null,"[Incomplete Response]");break}if(i==zc){t.s=4,Dc(15),bc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}bc(t.j,t.m,i,null),nl(t,i)}Wc(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Dc(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mu(e),e.M=!0,Dc(11))):(bc(t.j,t.m,n,"[Invalid Chunked Response]"),el(t),tl(t))}function Xc(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?Hc:(n=Number(e.substring(n,i)),isNaN(n)?zc:(i+=1)+n>e.length?Hc:(e=e.slice(i,i+n),t.o=i+n,e))}function Yc(t){t.Y=Date.now()+t.P,Jc(t,t.P)}function Jc(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=xc(Zo(t.lb,t),e)}function Zc(t){t.C&&(Go.clearTimeout(t.C),t.C=null)}function tl(t){0==t.l.H||t.J||_u(t.l,t)}function el(t){Zc(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,dc(t.V),_c(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function nl(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Ol(n.i,t)))if(!t.K&&Ol(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;vu(n),cu(n)}gu(n),Dc(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=xc(Zo(n.ib,n),6e3));if(1>=xl(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else bu(n,11)}else if((t.K||n.g==t)&&vu(n),!ca(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Nl(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,ul(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=Tu(i,i.J?i.pa:null,i.Y),o.K){Ll(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Zc(a),Yc(a)),i.g=o}else pu(i);0<n.j.length&&uu(n)}else"stop"!=l[0]&&"close"!=l[0]||bu(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?bu(n,7):au(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Sc()}catch(t){}}function il(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ko(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Ko(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Ko(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(Bo=Uc.prototype).setTimeout=function(t){this.P=t},Bo.nb=function(t){t=t.target;const e=this.M;e&&3==eu(t)?e.l():this.Pa(t)},Bo.Pa=function(t){try{if(t==this.g)t:{const u=eu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||va||this.g&&(this.h.h||this.g.ja()||nu(this.g)))){this.J||4!=u||7==e||Sc(),Zc(this);var n=this.g.da();this.ca=n;e:if(Wc(this)){var i=nu(this.g);t="";var r=i.length,s=4==eu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){el(this),tl(this);var o="";break e}this.h.i=new Go.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ca(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,Dc(12),el(this),tl(this);break t}bc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nl(this,n)}this.S?(Qc(this,u,o),va&&this.i&&3==u&&(vc(this.U,this.V,"tick",this.mb),this.V.start())):(bc(this.j,this.m,o,null),nl(this,o)),4==u&&el(this),this.i&&!this.J&&(4==u?_u(this.l,this):(this.i=!1,Yc(this)))}else(function(t){const e={};t=(t.g&&2<=eu(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(ca(t[i]))continue;var n=rc(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Dc(12)):(this.s=0,Dc(13)),el(this),tl(this)}}}catch(t){}},Bo.mb=function(){if(this.g){var t=eu(this.g),e=this.g.ja();this.o<e.length&&(Zc(this),Qc(this,t,e),this.i&&4!=t&&Yc(this))}},Bo.cancel=function(){this.J=!0,el(this)},Bo.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(Sc(),Dc(17)),el(this),this.s=2,tl(this)):Jc(this,this.Y-t)};var rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sl(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof sl){this.h=t.h,al(this,t.j),this.s=t.s,this.g=t.g,cl(this,t.m),this.l=t.l;var e=t.i,n=new wl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ll(this,n),this.o=t.o}else t&&(e=String(t).match(rl))?(this.h=!1,al(this,e[1]||"",!0),this.s=dl(e[2]||""),this.g=dl(e[3]||"",!0),cl(this,e[4]),this.l=dl(e[5]||"",!0),ll(this,e[6]||"",!0),this.o=dl(e[7]||"")):(this.h=!1,this.i=new wl(null,this.h))}function ol(t){return new sl(t)}function al(t,e,n){t.j=n?dl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ll(t,e,n){e instanceof wl?(t.i=e,function(t,e){e&&!t.j&&(bl(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(El(this,e),Al(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=fl(e,vl)),t.i=new wl(e,t.h))}function ul(t,e,n){t.i.set(e,n)}function hl(t){return ul(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function dl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,pl),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pl(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}sl.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fl(e,gl,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(fl(e,gl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(fl(n,"/"==n.charAt(0)?yl:ml,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",fl(n,_l)),t.join("")};var gl=/[#\/\?@]/g,ml=/[#\?:]/g,yl=/[#\?]/g,vl=/[#\?@]/g,_l=/#/g;function wl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function bl(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function El(t,e){bl(t),e=Il(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Tl(t,e){return bl(t),e=Il(t,e),t.g.has(e)}function Al(t,e,n){El(t,e),0<n.length&&(t.i=null,t.g.set(Il(t,e),ra(n)),t.h+=n.length)}function Il(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Bo=wl.prototype).add=function(t,e){bl(this),this.i=null,t=Il(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Bo.forEach=function(t,e){bl(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Bo.ta=function(){bl(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Bo.Z=function(t){bl(this);let e=[];if("string"==typeof t)Tl(this,t)&&(e=e.concat(this.g.get(Il(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Bo.set=function(t,e){return bl(this),this.i=null,Tl(this,t=Il(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Bo.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Bo.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var Sl=class{constructor(t,e){this.g=t,this.map=e}};function Cl(t){this.l=t||Dl,t=Go.PerformanceNavigationTiming?0<(t=Go.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Go.g&&Go.g.Ka&&Go.g.Ka()&&Go.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Dl=10;function kl(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xl(t){return t.h?1:t.g?t.g.size:0}function Ol(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Nl(t,e){t.g?t.g.add(e):t.h=e}function Ll(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Pl(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ra(t.i)}Cl.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Ml=class{stringify(t){return Go.JSON.stringify(t,void 0)}parse(t){return Go.JSON.parse(t,void 0)}};function Rl(){this.g=new Ml}function Fl(t,e,n){const i=n||"";try{il(t,(function(t,n){let r=t;Wo(t)&&(r=tc(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function jl(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Vl(t){this.l=t.ec||null,this.j=t.ob||!1}function $l(t,e){Ya.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ul,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ea(Vl,Lc),Vl.prototype.g=function(){return new $l(this.l,this.j)},Vl.prototype.i=function(t){return function(){return t}}({}),ea($l,Ya);var Ul=0;function Bl(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ql(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zl(t)}function zl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Bo=$l.prototype).open=function(t,e){if(this.readyState!=Ul)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zl(this)},Bo.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Go).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Bo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ql(this)),this.readyState=Ul},Bo.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Go.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bl(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Bo.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ql(this):zl(this),3==this.readyState&&Bl(this)}},Bo.Za=function(t){this.g&&(this.response=this.responseText=t,ql(this))},Bo.Ya=function(t){this.g&&(this.response=t,ql(this))},Bo.ka=function(){this.g&&ql(this)},Bo.setRequestHeader=function(t,e){this.v.append(t,e)},Bo.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Bo.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty($l.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Hl=Go.JSON.parse;function Gl(t){Ya.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Kl,this.L=this.M=!1}ea(Gl,Ya);var Kl="",Wl=/^https?$/i,Ql=["POST","PUT"];function Xl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Yl(t),Zl(t)}function Yl(t){t.F||(t.F=!0,Ja(t,"complete"),Ja(t,"error"))}function Jl(t){if(t.h&&void 0!==Ho&&(!t.C[1]||4!=eu(t)||2!=t.da()))if(t.v&&4==eu(t))fc(t.La,0,t);else if(Ja(t,"readystatechange"),4==eu(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(rl)[1]||null;!r&&Go.self&&Go.self.location&&(r=Go.self.location.protocol.slice(0,-1)),i=!Wl.test(r?r.toLowerCase():"")}n=i}if(n)Ja(t,"complete"),Ja(t,"success");else{t.m=6;try{var s=2<eu(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",Yl(t)}}finally{Zl(t)}}}function Zl(t,e){if(t.g){tu(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ja(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function tu(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Go.clearTimeout(t.A),t.A=null)}function eu(t){return t.g?t.g.readyState:0}function nu(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Kl:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function iu(t){let e="";return Na(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function ru(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=iu(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ul(t,e,n))}function su(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ou(t){this.Ga=0,this.j=[],this.l=new wc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=su("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=su("baseRetryDelayMs",5e3,t),this.hb=su("retryDelaySeedMs",1e4,t),this.eb=su("forwardChannelMaxRetries",2,t),this.xa=su("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Cl(t&&t.concurrentRequestLimit),this.Ja=new Rl,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function au(t){if(lu(t),3==t.H){var e=t.W++,n=ol(t.I);if(ul(n,"SID",t.K),ul(n,"RID",e),ul(n,"TYPE","terminate"),du(t,n),(e=new Uc(t,t.l,e)).L=2,e.A=hl(ol(n)),n=!1,Go.navigator&&Go.navigator.sendBeacon)try{n=Go.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Go.Image&&((new Image).src=e.A,n=!0),n||(e.g=Au(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Yc(e)}Eu(t)}function cu(t){t.g&&(mu(t),t.g.cancel(),t.g=null)}function lu(t){cu(t),t.u&&(Go.clearTimeout(t.u),t.u=null),vu(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Go.clearTimeout(t.m),t.m=null)}function uu(t){if(!kl(t.i)&&!t.m){t.m=!0;var e=t.Na;oc||lc(),ac||(oc(),ac=!0),cc.add(e,t),t.C=0}}function hu(t,e){var n;n=e?e.m:t.W++;const i=ol(t.I);ul(i,"SID",t.K),ul(i,"RID",n),ul(i,"AID",t.V),du(t,i),t.o&&t.s&&ru(i,t.o,t.s),n=new Uc(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=fu(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Nl(t.i,n),Gc(n,i,e)}function du(t,e){t.na&&Na(t.na,(function(t,n){ul(e,n,t)})),t.h&&il({},(function(t,n){ul(e,n,t)}))}function fu(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Zo(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Fl(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function pu(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;oc||lc(),ac||(oc(),ac=!0),cc.add(e,t),t.A=0}}function gu(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=xc(Zo(t.Ma,t),wu(t,t.A)),t.A++,0))}function mu(t){null!=t.B&&(Go.clearTimeout(t.B),t.B=null)}function yu(t){t.g=new Uc(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ol(t.wa);ul(e,"RID","rpc"),ul(e,"SID",t.K),ul(e,"AID",t.V),ul(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ul(e,"TO",t.qa),ul(e,"TYPE","xmlhttp"),du(t,e),t.o&&t.s&&ru(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=hl(ol(e)),n.u=null,n.S=!0,Kc(n,t)}function vu(t){null!=t.v&&(Go.clearTimeout(t.v),t.v=null)}function _u(t,e){var n=null;if(t.g==e){vu(t),mu(t),t.g=null;var i=2}else{if(!Ol(t.i,e))return;n=e.F,Ll(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;Ja(i=Ac(),new kc(i,n)),uu(t)}else pu(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(xl(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=xc(Zo(t.Na,t,e),wu(t,t.C)),t.C++,0)))}(t,e)||2==i&&gu(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:bu(t,5);break;case 4:bu(t,10);break;case 3:bu(t,6);break;default:bu(t,2)}}function wu(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function bu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=Zo(t.pb,t);n||(n=new sl("//www.google.com/images/cleardot.gif"),Go.location&&"http"==Go.location.protocol||al(n,"https"),hl(n)),function(t,e){const n=new wc;if(Go.Image){const i=new Image;i.onload=ta(jl,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ta(jl,n,i,"TestLoadImage: error",!1,e),i.onabort=ta(jl,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ta(jl,n,i,"TestLoadImage: timeout",!1,e),Go.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Dc(2);t.H=0,t.h&&t.h.za(e),Eu(t),lu(t)}function Eu(t){if(t.H=0,t.ma=[],t.h){const e=Pl(t.i);0==e.length&&0==t.j.length||(sa(t.ma,e),sa(t.ma,t.j),t.i.i.length=0,ra(t.j),t.j.length=0),t.h.ya()}}function Tu(t,e,n){var i=n instanceof sl?ol(n):new sl(n);if(""!=i.g)e&&(i.g=e+"."+i.g),cl(i,i.m);else{var r=Go.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new sl(null);i&&al(s,i),e&&(s.g=e),r&&cl(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&ul(i,n,e),ul(i,"VER",t.ra),du(t,i),i}function Au(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new Gl(new Vl({ob:n})):new Gl(t.va)).Oa(t.J),e}function Iu(){}function Su(){if(ma&&!(10<=Number(Ia)))throw Error("Environmental error: no available transport.")}function Cu(t,e){Ya.call(this),this.g=new ou(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ca(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ca(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new xu(this)}function Du(t){jc.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ku(){Vc.call(this),this.status=1}function xu(t){this.g=t}function Ou(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Nu(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function Lu(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(Bo=Gl.prototype).Oa=function(t){this.M=t},Bo.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rc.g(),this.C=this.u?Pc(this.u):Pc(Rc),this.g.onreadystatechange=Zo(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Xl(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Go.FormData&&t instanceof Go.FormData,!(0<=ia(Ql,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tu(this),0<this.B&&((this.L=function(t){return ma&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zo(this.ua,this)):this.A=fc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Xl(this,t)}},Bo.ua=function(){void 0!==Ho&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ja(this,"timeout"),this.abort(8))},Bo.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ja(this,"complete"),Ja(this,"abort"),Zl(this))},Bo.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zl(this,!0)),Gl.$.N.call(this)},Bo.La=function(){this.s||(this.G||this.v||this.l?Jl(this):this.kb())},Bo.kb=function(){Jl(this)},Bo.isActive=function(){return!!this.g},Bo.da=function(){try{return 2<eu(this)?this.g.status:-1}catch(t){return-1}},Bo.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Bo.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Hl(e)}},Bo.Ia=function(){return this.m},Bo.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Bo=ou.prototype).ra=8,Bo.H=1,Bo.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Uc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=La(s),Ma(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=fu(this,r,e),ul(n=ol(this.I),"RID",t),ul(n,"CVER",22),this.F&&ul(n,"X-HTTP-Session-Id",this.F),du(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(iu(s)))+"&"+e:this.o&&ru(n,this.o,s)),Nl(this.i,r),this.bb&&ul(n,"TYPE","init"),this.P?(ul(n,"$req",e),ul(n,"SID","null"),r.aa=!0,Gc(r,n,null)):Gc(r,n,e),this.H=2}}else 3==this.H&&(t?hu(this,t):0==this.j.length||kl(this.i)||hu(this))},Bo.Ma=function(){if(this.u=null,yu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=xc(Zo(this.jb,this),t)}},Bo.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Dc(10),cu(this),yu(this))},Bo.ib=function(){null!=this.v&&(this.v=null,cu(this),gu(this),Dc(19))},Bo.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Dc(2)):(this.l.info("Failed to ping google.com"),Dc(1))},Bo.isActive=function(){return!!this.h&&this.h.isActive(this)},(Bo=Iu.prototype).Ba=function(){},Bo.Aa=function(){},Bo.za=function(){},Bo.ya=function(){},Bo.isActive=function(){return!0},Bo.Va=function(){},Su.prototype.g=function(t,e){return new Cu(t,e)},ea(Cu,Ya),Cu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Dc(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Tu(t,null,t.Y),uu(t)},Cu.prototype.close=function(){au(this.g)},Cu.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=tc(t),t=n);e.j.push(new Sl(e.fb++,t)),3==e.H&&uu(e)},Cu.prototype.N=function(){this.g.h=null,delete this.j,au(this.g),delete this.g,Cu.$.N.call(this)},ea(Du,jc),ea(ku,Vc),ea(xu,Iu),xu.prototype.Ba=function(){Ja(this.g,"a")},xu.prototype.Aa=function(t){Ja(this.g,new Du(t))},xu.prototype.za=function(t){Ja(this.g,new ku)},xu.prototype.ya=function(){Ja(this.g,"b")},ea(Ou,(function(){this.blockSize=-1})),Ou.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ou.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)Nu(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Nu(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Nu(this,i),r=0;break}}this.h=r,this.i+=e},Ou.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Pu={};function Mu(t){return-128<=t&&128>t?function(t,e){var n=Pu;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new Lu([0|t],0>t?-1:0)}(t)}(t):new Lu([0|t],0>t?-1:0)}function Ru(t){if(isNaN(t)||!isFinite(t))return ju;if(0>t)return qu(Ru(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Fu;return new Lu(e,0)}var Fu=4294967296,ju=Mu(0),Vu=Mu(1),$u=Mu(16777216);function Uu(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Bu(t){return-1==t.h}function qu(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Lu(n,~t.h).add(Vu)}function zu(t,e){return t.add(qu(e))}function Hu(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Gu(t,e){this.g=t,this.h=e}function Ku(t,e){if(Uu(e))throw Error("division by zero");if(Uu(t))return new Gu(ju,ju);if(Bu(t))return e=Ku(qu(t),e),new Gu(qu(e.g),qu(e.h));if(Bu(e))return e=Ku(t,qu(e)),new Gu(qu(e.g),e.h);if(30<t.g.length){if(Bu(t)||Bu(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Vu,i=e;0>=i.X(t);)n=Wu(n),i=Wu(i);var r=Qu(n,1),s=Qu(i,1);for(i=Qu(i,2),n=Qu(n,2);!Uu(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Qu(i,1),n=Qu(n,1)}return e=zu(t,r.R(e)),new Gu(r,e)}for(r=ju;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Ru(n)).R(e);Bu(o)||0<o.X(t);)o=(s=Ru(n-=i)).R(e);Uu(s)&&(s=Vu),r=r.add(s),t=zu(t,o)}return new Gu(r,t)}function Wu(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Lu(n,t.h)}function Qu(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Lu(r,t.h)}(Bo=Lu.prototype).ea=function(){if(Bu(this))return-qu(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Fu+i)*e,e*=Fu}return t},Bo.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Uu(this))return"0";if(Bu(this))return"-"+qu(this).toString(t);for(var e=Ru(Math.pow(t,6)),n=this,i="";;){var r=Ku(n,e).g,s=((0<(n=zu(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Uu(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Bo.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Bo.X=function(t){return Bu(t=zu(this,t))?-1:Uu(t)?0:1},Bo.abs=function(){return Bu(this)?qu(this):this},Bo.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Lu(n,-2147483648&n[n.length-1]?-1:0)},Bo.R=function(t){if(Uu(this)||Uu(t))return ju;if(Bu(this))return Bu(t)?qu(this).R(qu(t)):qu(qu(this).R(t));if(Bu(t))return qu(this.R(qu(t)));if(0>this.X($u)&&0>t.X($u))return Ru(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,Hu(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Hu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Hu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Hu(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Lu(n,0)},Bo.gb=function(t){return Ku(this,t).h},Bo.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Lu(n,this.h&t.h)},Bo.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Lu(n,this.h|t.h)},Bo.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Lu(n,this.h^t.h)},Su.prototype.createWebChannel=Su.prototype.g,Cu.prototype.send=Cu.prototype.u,Cu.prototype.open=Cu.prototype.m,Cu.prototype.close=Cu.prototype.close,Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,Nc.COMPLETE="complete",Mc.EventType=Fc,Fc.OPEN="a",Fc.CLOSE="b",Fc.ERROR="c",Fc.MESSAGE="d",Ya.prototype.listen=Ya.prototype.O,Gl.prototype.listenOnce=Gl.prototype.P,Gl.prototype.getLastError=Gl.prototype.Sa,Gl.prototype.getLastErrorCode=Gl.prototype.Ia,Gl.prototype.getStatus=Gl.prototype.da,Gl.prototype.getResponseJson=Gl.prototype.Wa,Gl.prototype.getResponseText=Gl.prototype.ja,Gl.prototype.send=Gl.prototype.ha,Gl.prototype.setWithCredentials=Gl.prototype.Oa,Ou.prototype.digest=Ou.prototype.l,Ou.prototype.reset=Ou.prototype.reset,Ou.prototype.update=Ou.prototype.j,Lu.prototype.add=Lu.prototype.add,Lu.prototype.multiply=Lu.prototype.R,Lu.prototype.modulo=Lu.prototype.gb,Lu.prototype.compare=Lu.prototype.X,Lu.prototype.toNumber=Lu.prototype.ea,Lu.prototype.toString=Lu.prototype.toString,Lu.prototype.getBits=Lu.prototype.D,Lu.fromNumber=Ru,Lu.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return qu(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Ru(Math.pow(n,8)),r=ju,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Ru(Math.pow(n,o)),r=r.R(o).add(Ru(a))):r=(r=r.R(i)).add(Ru(a))}return r};var Xu=zo.createWebChannelTransport=function(){return new Su},Yu=zo.getStatEventTarget=function(){return Ac()},Ju=zo.ErrorCode=Oc,Zu=zo.EventType=Nc,th=zo.Event=Ec,eh=zo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nh=(zo.FetchXmlHttpFactory=Vl,zo.WebChannel=Mc),ih=zo.XhrIo=Gl,rh=(zo.Md5=Ou,zo.Integer=Lu);const sh="@firebase/firestore";class oh{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oh.UNAUTHENTICATED=new oh(null),oh.GOOGLE_CREDENTIALS=new oh("google-credentials-uid"),oh.FIRST_PARTY=new oh("first-party-uid"),oh.MOCK_USER=new oh("mock-user");let ah="10.8.1";const ch=new Qs("@firebase/firestore");function lh(){return ch.logLevel}function uh(t,...e){if(ch.logLevel<=qs.DEBUG){const n=e.map(fh);ch.debug(`Firestore (${ah}): ${t}`,...n)}}function hh(t,...e){if(ch.logLevel<=qs.ERROR){const n=e.map(fh);ch.error(`Firestore (${ah}): ${t}`,...n)}}function dh(t,...e){if(ch.logLevel<=qs.WARN){const n=e.map(fh);ch.warn(`Firestore (${ah}): ${t}`,...n)}}function fh(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function ph(t="Unexpected state"){const e=`FIRESTORE (${ah}) INTERNAL ASSERTION FAILED: `+t;throw hh(e),new Error(e)}function gh(t,e){t||ph()}function mh(t,e){return t}const yh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vh extends Cs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _h{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class wh{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(oh.UNAUTHENTICATED)))}shutdown(){}}class Eh{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Th{constructor(t){this.t=t,this.currentUser=oh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new _h;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new _h,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{uh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(uh("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new _h)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(uh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(gh("string"==typeof e.accessToken),new wh(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return gh(null===t||"string"==typeof t),new oh(t)}}class Ah{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=oh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ih{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Ah(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(oh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sh{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ch{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&uh("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,uh("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{uh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):uh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(gh("string"==typeof t.token),this.R=t.token,new Sh(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Dh(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class kh{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Dh(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function xh(t,e){return t<e?-1:t>e?1:0}function Oh(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Nh{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new vh(yh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new vh(yh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new vh(yh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vh(yh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Nh.fromMillis(Date.now())}static fromDate(t){return Nh.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Nh(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xh(this.nanoseconds,t.nanoseconds):xh(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lh{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Lh(t)}static min(){return new Lh(new Nh(0,0))}static max(){return new Lh(new Nh(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ph{constructor(t,e,n){void 0===e?e=0:e>t.length&&ph(),void 0===n?n=t.length-e:n>t.length-e&&ph(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Ph.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ph?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Mh extends Ph{construct(t,e,n){return new Mh(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new vh(yh.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Mh(e)}static emptyPath(){return new Mh([])}}const Rh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fh extends Ph{construct(t,e,n){return new Fh(t,e,n)}static isValidIdentifier(t){return Rh.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fh.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fh(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new vh(yh.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new vh(yh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new vh(yh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new vh(yh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fh(e)}static emptyPath(){return new Fh([])}}class jh{constructor(t){this.path=t}static fromPath(t){return new jh(Mh.fromString(t))}static fromName(t){return new jh(Mh.fromString(t).popFirst(5))}static empty(){return new jh(Mh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Mh.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Mh.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new jh(new Mh(t.slice()))}}function Vh(t){return new $h(t.readTime,t.key,-1)}class $h{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new $h(Lh.min(),jh.empty(),-1)}static max(){return new $h(Lh.max(),jh.empty(),-1)}}function Uh(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=jh.comparator(t.documentKey,e.documentKey),0!==n?n:xh(t.largestBatchId,e.largestBatchId))}const Bh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function zh(t){if(t.code!==yh.FAILED_PRECONDITION||t.message!==Bh)throw t;uh("LocalStore","Unexpectedly lost primary lease")}class Hh{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ph(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Hh(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Hh?e:Hh.resolve(e)}catch(t){return Hh.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Hh.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Hh.reject(e)}static resolve(t){return new Hh(((e,n)=>{e(t)}))}static reject(t){return new Hh(((e,n)=>{n(t)}))}static waitFor(t){return new Hh(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Hh.resolve(!1);for(const n of t)e=e.next((t=>t?Hh.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Hh(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Hh(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}class Gh{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new _h,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Qh(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=td(e.target.error);this.V.reject(new Qh(t,n))}}static open(t,e,n,i){try{return new Gh(e,t.transaction(i,n))}catch(t){throw new Qh(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(uh("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Yh(e)}}class Kh{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===Kh.S(As())&&hh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return uh("SimpleDb","Removing database:",t),Jh(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Is())return!1;if(Kh.C())return!0;const t=As(),e=Kh.S(t),n=0<e&&e<10,i=Kh.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(uh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Qh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new vh(yh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new vh(yh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Qh(t,i))},i.onupgradeneeded=t=>{uh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{uh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=Gh.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Hh.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(uh("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Wh{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Jh(this.k.delete())}}class Qh extends vh{constructor(t,e){super(yh.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Xh(t){return"IndexedDbTransactionError"===t.name}class Yh{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(uh("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(uh("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Jh(n)}add(t){return uh("SimpleDb","ADD",this.store.name,t,t),Jh(this.store.add(t))}get(t){return Jh(this.store.get(t)).next((e=>(void 0===e&&(e=null),uh("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return uh("SimpleDb","DELETE",this.store.name,t),Jh(this.store.delete(t))}count(){return uh("SimpleDb","COUNT",this.store.name),Jh(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Hh(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Hh(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){uh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Hh(((n,i)=>{e.onerror=t=>{const e=td(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Hh(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Wh(r),o=e(r.primaryKey,r.value,s);if(o instanceof Hh){const t=o.catch((t=>(s.done(),Hh.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Hh.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Jh(t){return new Hh(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=td(t.target.error);n(e)}}))}let Zh=!1;function td(t){const e=Kh.S(As());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new vh("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zh||(Zh=!0,setTimeout((()=>{throw t}),0)),t}}return t}class ed{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function nd(t){return null==t}function id(t){return 0===t&&1/t==-1/0}ed._e=-1;function rd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sd(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function od(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ad{constructor(t,e){this.comparator=t,this.root=e||ld.EMPTY}insert(t,e){return new ad(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ld.BLACK,null,null))}remove(t){return new ad(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ld.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cd(this.root,t,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cd(this.root,t,this.comparator,!0)}}class cd{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ld{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:ld.RED,this.left=null!=i?i:ld.EMPTY,this.right=null!=r?r:ld.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new ld(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ld.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ld.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ld.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ld.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ph();if(this.right.isRed())throw ph();const t=this.left.check();if(t!==this.right.check())throw ph();return t+(this.isRed()?0:1)}}ld.EMPTY=null,ld.RED=!0,ld.BLACK=!1,ld.EMPTY=new class{constructor(){this.size=0}get key(){throw ph()}get value(){throw ph()}get color(){throw ph()}get left(){throw ph()}get right(){throw ph()}copy(t,e,n,i,r){return this}insert(t,e,n){return new ld(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ud{constructor(t){this.comparator=t,this.data=new ad(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new hd(this.data.getIterator())}getIteratorFrom(t){return new hd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof ud))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ud(this.comparator);return e.data=t,e}}class hd{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class dd{constructor(t){this.fields=t,t.sort(Fh.comparator)}static empty(){return new dd([])}unionWith(t){let e=new ud(Fh.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new dd(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Oh(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class fd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pd{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new fd("Invalid base64 string: "+t):t}}(t);return new pd(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new pd(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xh(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pd.EMPTY_BYTE_STRING=new pd("");const gd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function md(t){if(gh(!!t),"string"==typeof t){let e=0;const n=gd.exec(t);if(gh(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yd(t.seconds),nanos:yd(t.nanos)}}function yd(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function vd(t){return"string"==typeof t?pd.fromBase64String(t):pd.fromUint8Array(t)}function _d(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wd(t){const e=t.mapValue.fields.__previous_value__;return _d(e)?wd(e):e}function bd(t){const e=md(t.mapValue.fields.__local_write_time__.timestampValue);return new Nh(e.seconds,e.nanos)}class Ed{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Td{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Td("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Td&&t.projectId===this.projectId&&t.database===this.database}}const Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Id(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_d(t)?4:Fd(t)?9007199254740991:10:ph()}function Sd(t,e){if(t===e)return!0;const n=Id(t);if(n!==Id(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bd(t).isEqual(bd(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=md(t.timestampValue),i=md(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return vd(t.bytesValue).isEqual(vd(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yd(t.geoPointValue.latitude)===yd(e.geoPointValue.latitude)&&yd(t.geoPointValue.longitude)===yd(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yd(t.integerValue)===yd(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=yd(t.doubleValue),i=yd(e.doubleValue);return n===i?id(n)===id(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Oh(t.arrayValue.values||[],e.arrayValue.values||[],Sd);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(rd(n)!==rd(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Sd(n[t],i[t])))return!1;return!0}(t,e);default:return ph()}}function Cd(t,e){return void 0!==(t.values||[]).find((t=>Sd(t,e)))}function Dd(t,e){if(t===e)return 0;const n=Id(t),i=Id(e);if(n!==i)return xh(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return xh(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=yd(t.integerValue||t.doubleValue),i=yd(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return kd(t.timestampValue,e.timestampValue);case 4:return kd(bd(t),bd(e));case 5:return xh(t.stringValue,e.stringValue);case 6:return function(t,e){const n=vd(t),i=vd(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=xh(n[t],i[t]);if(0!==e)return e}return xh(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=xh(yd(t.latitude),yd(e.latitude));return 0!==n?n:xh(yd(t.longitude),yd(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Dd(n[t],i[t]);if(e)return e}return xh(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Ad.mapValue&&e===Ad.mapValue)return 0;if(t===Ad.mapValue)return 1;if(e===Ad.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=xh(i[t],s[t]);if(0!==e)return e;const o=Dd(n[i[t]],r[s[t]]);if(0!==o)return o}return xh(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ph()}}function kd(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return xh(t,e);const n=md(t),i=md(e),r=xh(n.seconds,i.seconds);return 0!==r?r:xh(n.nanos,i.nanos)}function xd(t){return Od(t)}function Od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=md(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return vd(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return jh.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Od(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Od(t.fields[r])}`;return n+"}"}(t.mapValue):ph()}function Nd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ld(t){return!!t&&"integerValue"in t}function Pd(t){return!!t&&"arrayValue"in t}function Md(t){return!!t&&"mapValue"in t}function Rd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sd(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Rd(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fd(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class jd{constructor(t){this.value=t}static empty(){return new jd({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Md(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rd(e)}setAll(t){let e=Fh.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Rd(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Md(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Sd(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){sd(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new jd(Rd(this.value))}}function Vd(t){const e=[];return sd(t.fields,((t,n)=>{const i=new Fh([t]);if(Md(n)){const t=Vd(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new dd(e)}class $d{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new $d(t,0,Lh.min(),Lh.min(),Lh.min(),jd.empty(),0)}static newFoundDocument(t,e,n,i){return new $d(t,1,e,Lh.min(),n,i,0)}static newNoDocument(t,e){return new $d(t,2,e,Lh.min(),Lh.min(),jd.empty(),0)}static newUnknownDocument(t,e){return new $d(t,3,e,Lh.min(),Lh.min(),jd.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Lh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=jd.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=jd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lh.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof $d&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $d(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ud{constructor(t,e){this.position=t,this.inclusive=e}}function Bd(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?jh.comparator(jh.fromName(o.referenceValue),n.key):Dd(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function qd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sd(t.position[n],e.position[n]))return!1;return!0}class zd{constructor(t,e="asc"){this.field=t,this.dir=e}}function Hd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Gd{}class Kd extends Gd{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new tf(t,e,n):"array-contains"===e?new sf(t,n):"in"===e?new of(t,n):"not-in"===e?new af(t,n):"array-contains-any"===e?new cf(t,n):new Kd(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new ef(t,n):new nf(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Dd(e,this.value)):null!==e&&Id(this.value)===Id(e)&&this.matchesComparison(Dd(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ph()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wd extends Gd{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Wd(t,e)}matches(t){return Qd(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Qd(t){return"and"===t.op}function Xd(t){return function(t){for(const e of t.filters)if(e instanceof Wd)return!1;return!0}(t)&&Qd(t)}function Yd(t){if(t instanceof Kd)return t.field.canonicalString()+t.op.toString()+xd(t.value);if(Xd(t))return t.filters.map((t=>Yd(t))).join(",");{const e=t.filters.map((t=>Yd(t))).join(",");return`${t.op}(${e})`}}function Jd(t,e){return t instanceof Kd?function(t,e){return e instanceof Kd&&t.op===e.op&&t.field.isEqual(e.field)&&Sd(t.value,e.value)}(t,e):t instanceof Wd?function(t,e){return e instanceof Wd&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Jd(n,e.filters[i])),!0)}(t,e):void ph()}function Zd(t){return t instanceof Kd?function(t){return`${t.field.canonicalString()} ${t.op} ${xd(t.value)}`}(t):t instanceof Wd?function(t){return t.op.toString()+" {"+t.getFilters().map(Zd).join(" ,")+"}"}(t):"Filter"}class tf extends Kd{constructor(t,e,n){super(t,e,n),this.key=jh.fromName(n.referenceValue)}matches(t){const e=jh.comparator(t.key,this.key);return this.matchesComparison(e)}}class ef extends Kd{constructor(t,e){super(t,"in",e),this.keys=rf(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class nf extends Kd{constructor(t,e){super(t,"not-in",e),this.keys=rf(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function rf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>jh.fromName(t.referenceValue)))}class sf extends Kd{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Pd(e)&&Cd(e.arrayValue,this.value)}}class of extends Kd{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Cd(this.value.arrayValue,e)}}class af extends Kd{constructor(t,e){super(t,"not-in",e)}matches(t){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Cd(this.value.arrayValue,e)}}class cf extends Kd{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Pd(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Cd(this.value.arrayValue,t)))}}class lf{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function uf(t,e=null,n=[],i=[],r=null,s=null,o=null){return new lf(t,e,n,i,r,s,o)}function hf(t){const e=mh(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Yd(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),nd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>xd(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>xd(t))).join(",")),e.ce=t}return e.ce}function df(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Hd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jd(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qd(t.startAt,e.startAt)&&qd(t.endAt,e.endAt)}class ff{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function pf(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function gf(t){return null!==t.collectionGroup}function mf(t){const e=mh(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new ud(Fh.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new zd(i,n))})),t.has(Fh.keyField().canonicalString())||e.le.push(new zd(Fh.keyField(),n))}return e.le}function yf(t){const e=mh(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return uf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new zd(t.field,e)}));const n=t.endAt?new Ud(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ud(t.startAt.position,t.startAt.inclusive):null;return uf(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,mf(t))),e.he}function vf(t,e){const n=t.filters.concat([e]);return new ff(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _f(t,e,n){return new ff(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wf(t,e){return df(yf(t),yf(e))&&t.limitType===e.limitType}function bf(t){return`${hf(yf(t))}|lt:${t.limitType}`}function Ef(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Zd(t))).join(", ")}]`),nd(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>xd(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>xd(t))).join(",")),`Target(${e})`}(yf(t))}; limitType=${t.limitType})`}function Tf(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):jh.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of mf(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Bd(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,mf(t),e)||t.endAt&&!function(t,e,n){const i=Bd(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,mf(t),e))}(t,e)}function Af(t,e,n){const i=t.field.isKeyField()?jh.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Dd(i,r):ph()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ph()}}class If{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){sd(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return od(this.inner)}size(){return this.innerSize}}const Sf=new ad(jh.comparator);function Cf(){return Sf}const Df=new ad(jh.comparator);function kf(...t){let e=Df;for(const n of t)e=e.insert(n.key,n);return e}function xf(t){let e=Df;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Of(){return Lf()}function Nf(){return Lf()}function Lf(){return new If((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Pf=new ad(jh.comparator),Mf=new ud(jh.comparator);function Rf(...t){let e=Mf;for(const n of t)e=e.add(n);return e}const Ff=new ud(xh);function jf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function Vf(t){return{integerValue:""+t}}function $f(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!id(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Vf(e):jf(t,e)}class Uf{constructor(){this._=void 0}}function Bf(t,e,n){return t instanceof Hf?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&_d(e)&&(e=wd(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Gf?Kf(t,e):t instanceof Wf?Qf(t,e):function(t,e){const n=zf(t,e),i=Yf(n)+Yf(t.Ie);return Ld(n)&&Ld(t.Ie)?Vf(i):jf(t.serializer,i)}(t,e)}function qf(t,e,n){return t instanceof Gf?Kf(t,e):t instanceof Wf?Qf(t,e):n}function zf(t,e){return t instanceof Xf?function(t){return Ld(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Hf extends Uf{}class Gf extends Uf{constructor(t){super(),this.elements=t}}function Kf(t,e){const n=Jf(e);for(const e of t.elements)n.some((t=>Sd(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Wf extends Uf{constructor(t){super(),this.elements=t}}function Qf(t,e){let n=Jf(e);for(const e of t.elements)n=n.filter((t=>!Sd(t,e)));return{arrayValue:{values:n}}}class Xf extends Uf{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Yf(t){return yd(t.integerValue||t.doubleValue)}function Jf(t){return Pd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Zf{constructor(t,e){this.version=t,this.transformResults=e}}class tp{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new tp}static exists(t){return new tp(void 0,t)}static updateTime(t){return new tp(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ep(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class np{}function ip(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new fp(t.key,tp.none()):new cp(t.key,t.data,tp.none());{const n=t.data,i=jd.empty();let r=new ud(Fh.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new lp(t.key,i,new dd(r.toArray()),tp.none())}}function rp(t,e,n){t instanceof cp?function(t,e,n){const i=t.value.clone(),r=hp(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof lp?function(t,e,n){if(!ep(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=hp(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(up(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function sp(t,e,n,i){return t instanceof cp?function(t,e,n,i){if(!ep(t.precondition,e))return n;const r=t.value.clone(),s=dp(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof lp?function(t,e,n,i){if(!ep(t.precondition,e))return n;const r=dp(t.fieldTransforms,i,e),s=e.data;return s.setAll(up(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return ep(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function op(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=zf(i.transform,t||null);null!=r&&(null===n&&(n=jd.empty()),n.set(i.field,r))}return n||null}function ap(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Oh(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Gf&&e instanceof Gf||t instanceof Wf&&e instanceof Wf?Oh(t.elements,e.elements,Sd):t instanceof Xf&&e instanceof Xf?Sd(t.Ie,e.Ie):t instanceof Hf&&e instanceof Hf}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cp extends np{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class lp extends np{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function up(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function hp(t,e,n){const i=new Map;gh(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,qf(o,a,n[r]))}return i}function dp(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Bf(t,s,e))}return i}class fp extends np{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pp extends np{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gp{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&rp(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=sp(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=sp(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Nf();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=ip(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Lh.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Rf())}isEqual(t){return this.batchId===t.batchId&&Oh(this.mutations,t.mutations,((t,e)=>ap(t,e)))&&Oh(this.baseMutations,t.baseMutations,((t,e)=>ap(t,e)))}}class mp{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){gh(t.mutations.length===n.length);let i=Pf;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new mp(t,e,n,i)}}class yp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var vp,_p;(_p=vp||(vp={}))[_p.OK=0]="OK",_p[_p.CANCELLED=1]="CANCELLED",_p[_p.UNKNOWN=2]="UNKNOWN",_p[_p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_p[_p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_p[_p.NOT_FOUND=5]="NOT_FOUND",_p[_p.ALREADY_EXISTS=6]="ALREADY_EXISTS",_p[_p.PERMISSION_DENIED=7]="PERMISSION_DENIED",_p[_p.UNAUTHENTICATED=16]="UNAUTHENTICATED",_p[_p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_p[_p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_p[_p.ABORTED=10]="ABORTED",_p[_p.OUT_OF_RANGE=11]="OUT_OF_RANGE",_p[_p.UNIMPLEMENTED=12]="UNIMPLEMENTED",_p[_p.INTERNAL=13]="INTERNAL",_p[_p.UNAVAILABLE=14]="UNAVAILABLE",_p[_p.DATA_LOSS=15]="DATA_LOSS",new rh([4294967295,4294967295],0);class wp{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function bp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ep(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tp(t,e){return bp(t,e.toTimestamp())}function Ap(t){return gh(!!t),Lh.fromTimestamp(function(t){const e=md(t);return new Nh(e.seconds,e.nanos)}(t))}function Ip(t,e){return Sp(t,e).canonicalString()}function Sp(t,e){const n=function(t){return new Mh(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Cp(t,e){return Ip(t.databaseId,e.path)}function Dp(t){const e=function(t){const e=Mh.fromString(t);return gh(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?Mh.emptyPath():function(t){return gh(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function kp(t,e,n){return{name:Cp(t,e),fields:n.value.mapValue.fields}}function xp(t){let e=Dp(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){gh(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Op(t);return e instanceof Wd&&Xd(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new zd(Np(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,nd(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Ud(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Ud(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new ff(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function Op(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Np(t.unaryFilter.field);return Kd.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Np(t.unaryFilter.field);return Kd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Np(t.unaryFilter.field);return Kd.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Np(t.unaryFilter.field);return Kd.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ph()}}(t):void 0!==t.fieldFilter?function(t){return Kd.create(Np(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ph()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Wd.create(t.compositeFilter.filters.map((t=>Op(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ph()}}(t.compositeFilter.op))}(t):ph()}function Np(t){return Fh.fromServerFormat(t.fieldPath)}function Lp(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}class Pp{constructor(t){this.ct=t}}function Mp(t){const e=xp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_f(e,e.limit,"L"):e}class Rp{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(yd(t.integerValue));else if("doubleValue"in t){const n=yd(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),id(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(vd(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Fd(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):ph()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const t of Object.keys(n))this.Rt(t,e),this.It(n[t],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const t of n)this.It(t,e)}gt(t,e){this.Et(e,37),jh.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}Rp.bt=new Rp;class Fp{constructor(){this._n=new jp}addToCollectionParentIndex(t,e){return this._n.add(e),Hh.resolve()}getCollectionParents(t,e){return Hh.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Hh.resolve()}deleteFieldIndex(t,e){return Hh.resolve()}deleteAllFieldIndexes(t){return Hh.resolve()}createTargetIndexes(t,e){return Hh.resolve()}getDocumentsMatchingTarget(t,e){return Hh.resolve(null)}getIndexType(t,e){return Hh.resolve(0)}getFieldIndexes(t,e){return Hh.resolve([])}getNextCollectionGroupToUpdate(t){return Hh.resolve(null)}getMinOffset(t,e){return Hh.resolve($h.min())}getMinOffsetFromCollectionGroup(t,e){return Hh.resolve($h.min())}updateCollectionGroup(t,e,n){return Hh.resolve()}updateIndexEntries(t,e){return Hh.resolve()}}class jp{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new ud(Mh.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new ud(Mh.comparator)).toArray()}}new Uint8Array(0);class Vp{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Vp(t,Vp.DEFAULT_COLLECTION_PERCENTILE,Vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Vp.DEFAULT_COLLECTION_PERCENTILE=10,Vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vp.DEFAULT=new Vp(41943040,Vp.DEFAULT_COLLECTION_PERCENTILE,Vp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vp.DISABLED=new Vp(-1,0,0);class $p{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new $p(0)}static Bn(){return new $p(-1)}}class Up{constructor(){this.changes=new If((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,$d.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Hh.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Bp{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class qp{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&sp(n.mutation,t,dd.empty(),Nh.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Rf()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Rf()){const i=Of();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=kf();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Of();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Rf())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Cf();const s=Lf(),o=Lf();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof lp)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),sp(o.mutation,e,o.mutation.getFieldMask(),Nh.now())):s.set(e.key,dd.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Bp(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Lf();let i=new ad(((t,e)=>t-e)),r=Rf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||dd.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Rf()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Nf();c.forEach((t=>{if(!r.has(t)){const i=ip(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Hh.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return jh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):gf(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Hh.resolve(Of());let o=-1,a=r;return s.next((e=>Hh.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Hh.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Rf()))).next((t=>({batchId:o,changes:xf(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new jh(e)).next((t=>{let e=kf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=kf();return this.indexManager.getCollectionParents(t,r).next((o=>Hh.forEach(o,(o=>{const a=function(t,e){return new ff(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,$d.newInvalidDocument(i)))}));let n=kf();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&sp(s.mutation,i,dd.empty(),Nh.now()),Tf(e,i)&&(n=n.insert(t,i))})),n}))}}class zp{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Hh.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Ap(t.createTime)}}(e)),Hh.resolve()}getNamedQuery(t,e){return Hh.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:Mp(t.bundledQuery),readTime:Ap(t.readTime)}}(e)),Hh.resolve()}}class Hp{constructor(){this.overlays=new ad(jh.comparator),this.hr=new Map}getOverlay(t,e){return Hh.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Of();return Hh.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Hh.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Hh.resolve()}getOverlaysForCollection(t,e,n){const i=Of(),r=e.length+1,s=new jh(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Hh.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new ad(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Of(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Of(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Hh.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new yp(e,n));let r=this.hr.get(e);void 0===r&&(r=Rf(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}class Gp{constructor(){this.Pr=new ud(Kp.Ir),this.Tr=new ud(Kp.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new Kp(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new Kp(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new jh(new Mh([])),n=new Kp(e,t),i=new Kp(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new jh(new Mh([])),n=new Kp(e,t),i=new Kp(e,t+1);let r=Rf();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Kp(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Kp{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return jh.comparator(t.key,e.key)||xh(t.pr,e.pr)}static Er(t,e){return xh(t.pr,e.pr)||jh.comparator(t.key,e.key)}}class Wp{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ud(Kp.Ir)}checkEmpty(t){return Hh.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new gp(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.wr=this.wr.add(new Kp(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Hh.resolve(s)}lookupMutationBatch(t,e){return Hh.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Hh.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Hh.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Hh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Kp(e,0),i=new Kp(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Hh.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ud(xh);return e.forEach((t=>{const e=new Kp(t,0),i=new Kp(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Hh.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;jh.isDocumentKey(r)||(r=r.child(""));const s=new Kp(new jh(r),0);let o=new ud(xh);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Hh.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){gh(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Hh.forEach(e.mutations,(i=>{const r=new Kp(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new Kp(e,0),i=this.wr.firstAfterOrEqual(n);return Hh.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Hh.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Qp{constructor(t){this.vr=t,this.docs=new ad(jh.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Hh.resolve(n?n.document.mutableCopy():$d.newInvalidDocument(e))}getEntries(t,e){let n=Cf();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():$d.newInvalidDocument(t))})),Hh.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Cf();const s=e.path,o=new jh(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Uh(Vh(o),n)<=0||(i.has(o.key)||Tf(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Hh.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ph()}Fr(t,e){return Hh.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Xp(this)}getSize(t){return Hh.resolve(this.size)}}class Xp extends Up{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Hh.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class Yp{constructor(t){this.persistence=t,this.Mr=new If((t=>hf(t)),df),this.lastRemoteSnapshotVersion=Lh.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Gp,this.targetCount=0,this.Br=$p.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Hh.resolve()}getLastRemoteSnapshotVersion(t){return Hh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Hh.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Hh.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Hh.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new $p(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Hh.resolve()}updateTargetData(t,e){return this.qn(e),Hh.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Hh.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Hh.waitFor(r).next((()=>i))}getTargetCount(t){return Hh.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Hh.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Hh.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Hh.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Hh.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Hh.resolve(n)}containsKey(t,e){return Hh.resolve(this.Nr.containsKey(e))}}class Jp{constructor(t,e){this.Lr={},this.overlays={},this.kr=new ed(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Yp(this),this.indexManager=new Fp,this.remoteDocumentCache=function(t){return new Qp(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Pp(e),this.$r=new zp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Hp,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new Wp(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){uh("MemoryPersistence","Starting transaction:",t);const i=new Zp(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Hh.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class Zp extends qh{constructor(t){super(),this.currentSequenceNumber=t}}class tg{constructor(t){this.persistence=t,this.zr=new Gp,this.jr=null}static Hr(t){return new tg(t)}get Jr(){if(this.jr)return this.jr;throw ph()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Hh.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Hh.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Hh.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hh.forEach(this.Jr,(n=>{const i=jh.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,Lh.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Hh.or([()=>Hh.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class eg{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Rf(),i=Rf();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new eg(t,e.fromCache,n,i)}}class ng{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class ig{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=!function(){var e;const n=null===(e=bs())||void 0===e?void 0:e.forceEnvironment;if("node"===n)return!0;if("browser"===n)return!1;try{return"[object process]"===Object.prototype.toString.call(t.g.process)}catch(t){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Kh.v(As())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new ng;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(lh()<=qs.DEBUG&&uh("QueryEngine","SDK will not create cache indexes for query:",Ef(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Hh.resolve()):(lh()<=qs.DEBUG&&uh("QueryEngine","Query:",Ef(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(lh()<=qs.DEBUG&&uh("QueryEngine","The SDK decides to create cache indexes for query:",Ef(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yf(e))):Hh.resolve())}ji(t,e){if(pf(e))return Hh.resolve(null);let n=yf(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=_f(e,null,"F"),n=yf(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Rf(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,_f(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return pf(e)||i.isEqual(Lh.min())?Hh.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Hh.resolve(null):(lh()<=qs.DEBUG&&uh("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ef(e)),this.es(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Lh.fromTimestamp(1e9===i?new Nh(n+1,0):new Nh(n,i));return new $h(r,jh.empty(),e)}(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new ud(function(t){return(e,n)=>{let i=!1;for(const r of mf(t)){const t=Af(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{Tf(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return lh()<=qs.DEBUG&&uh("QueryEngine","Using full collection scan to execute query:",Ef(e)),this.zi.getDocumentsMatchingQuery(t,e,$h.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class rg{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new ad(xh),this.rs=new If((t=>hf(t)),df),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new qp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}async function sg(t,e){const n=mh(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Rf();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function og(t,e){const n=mh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class ag{constructor(){this.activeTargetIds=Ff}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cg{constructor(){this.no=new ag,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ag,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class lg{io(t){}shutdown(){}}class ug{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){uh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){uh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let hg=null;function dg(){return null===hg?hg=268435456+Math.round(2147483648*Math.random()):hg++,"0x"+hg.toString(16)}const fg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pg{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const gg="WebChannelConnection";class mg extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=dg(),o=this.bo(t,e.toUriEncodedString());uh("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(uh("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw dh("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ah,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=fg[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=dg();return new Promise(((s,o)=>{const a=new ih;a.setWithCredentials(!0),a.listenOnce(Zu.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ju.NO_ERROR:const e=a.getResponseJson();uh(gg,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Ju.TIMEOUT:uh(gg,`RPC '${t}' ${r} timed out`),o(new vh(yh.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const n=a.getStatus();if(uh(gg,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(yh).indexOf(e)>=0?e:yh.UNKNOWN}(e.status);o(new vh(t,e.message))}else o(new vh(yh.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new vh(yh.UNAVAILABLE,"Connection failed."));break;default:ph()}}finally{uh(gg,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);uh(gg,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Fo(t,e,n){const i=dg(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Xu(),o=Yu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");uh(gg,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new pg({lo:e=>{d?uh(gg,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(uh(gg,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),uh(gg,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},ho:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,nh.EventType.OPEN,(()=>{d||uh(gg,`RPC '${t}' stream ${i} transport opened.`)})),p(u,nh.EventType.CLOSE,(()=>{d||(d=!0,uh(gg,`RPC '${t}' stream ${i} transport closed`),f.Vo())})),p(u,nh.EventType.ERROR,(e=>{d||(d=!0,dh(gg,`RPC '${t}' stream ${i} transport errored:`,e),f.Vo(new vh(yh.UNAVAILABLE,"The operation could not be completed")))})),p(u,nh.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];gh(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){uh(gg,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=vp[t];if(void 0!==e)return function(t){if(void 0===t)return hh("GRPC error has no .code"),yh.UNKNOWN;switch(t){case vp.OK:return yh.OK;case vp.CANCELLED:return yh.CANCELLED;case vp.UNKNOWN:return yh.UNKNOWN;case vp.DEADLINE_EXCEEDED:return yh.DEADLINE_EXCEEDED;case vp.RESOURCE_EXHAUSTED:return yh.RESOURCE_EXHAUSTED;case vp.INTERNAL:return yh.INTERNAL;case vp.UNAVAILABLE:return yh.UNAVAILABLE;case vp.UNAUTHENTICATED:return yh.UNAUTHENTICATED;case vp.INVALID_ARGUMENT:return yh.INVALID_ARGUMENT;case vp.NOT_FOUND:return yh.NOT_FOUND;case vp.ALREADY_EXISTS:return yh.ALREADY_EXISTS;case vp.PERMISSION_DENIED:return yh.PERMISSION_DENIED;case vp.FAILED_PRECONDITION:return yh.FAILED_PRECONDITION;case vp.ABORTED:return yh.ABORTED;case vp.OUT_OF_RANGE:return yh.OUT_OF_RANGE;case vp.UNIMPLEMENTED:return yh.UNIMPLEMENTED;case vp.DATA_LOSS:return yh.DATA_LOSS;default:return ph()}}(e)}(e),r=o.message;void 0===n&&(n=yh.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Vo(new vh(n,r)),u.close()}else uh(gg,`RPC '${t}' stream ${i} received:`,r),f.mo(r)}})),p(o,th.STAT_EVENT,(e=>{e.stat===eh.PROXY?uh(gg,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===eh.NOPROXY&&uh(gg,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function yg(){return"undefined"!=typeof document?document:null}function vg(t){return new wp(t,!0)}class _g{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&uh("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class wg{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new _g(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===yh.RESOURCE_EXHAUSTED?(hh(e.toString()),hh("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===yh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new vh(yh.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return uh("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(uh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bg extends wg{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(gh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(gh(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Ap(t.updateTime):Ap(e);return n.isEqual(Lh.min())&&(n=Ap(e)),new Zf(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Ap(t.commitTime);return this.listener.T_(n,e)}return gh(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=function(t){return new Mh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof cp)n={update:kp(t,e.key,e.value)};else if(e instanceof fp)n={delete:Cp(t,e.key)};else if(e instanceof lp)n={update:kp(t,e.key,e.data),updateMask:Lp(e.fieldMask)};else{if(!(e instanceof pp))return ph();n={verify:Cp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Hf)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gf)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wf)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xf)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw ph()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Tp(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ph()}(t,e.precondition)),n}(this.serializer,t)))};this.t_(e)}}class Eg extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new vh(yh.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,Sp(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===yh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new vh(yh.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Sp(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===yh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new vh(yh.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Tg{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(hh(e),this.g_=!1):uh("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Ag{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{Cg(this)&&(uh("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=mh(t);e.v_.add(4),await Sg(e),e.x_.set("Unknown"),e.v_.delete(4),await Ig(e)}(this))}))})),this.x_=new Tg(n,i)}}async function Ig(t){if(Cg(t))for(const e of t.F_)await e(!0)}async function Sg(t){for(const e of t.F_)await e(!1)}function Cg(t){return 0===mh(t).v_.size}async function Dg(t,e,n){if(!Xh(e))throw e;t.v_.add(1),await Sg(t),t.x_.set("Offline"),n||(n=()=>function(t){const e=mh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{uh("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Ig(t)}))}function kg(t,e){return e().catch((n=>Dg(t,n,e)))}async function xg(t){const e=mh(t),n=$g(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Og(e);)try{const t=await og(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,Ng(e,t)}catch(t){await Dg(e,t)}Lg(e)&&Pg(e)}function Og(t){return Cg(t)&&t.D_.length<10}function Ng(t,e){t.D_.push(e);const n=$g(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Lg(t){return Cg(t)&&!$g(t).Ho()&&t.D_.length>0}function Pg(t){$g(t).start()}async function Mg(t){$g(t).d_()}async function Rg(t){const e=$g(t);for(const n of t.D_)e.I_(n.mutations)}async function Fg(t,e,n){const i=t.D_.shift(),r=mp.from(i,e,n);await kg(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await xg(t)}async function jg(t,e){e&&$g(t).P_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return ph();case yh.CANCELLED:case yh.UNKNOWN:case yh.DEADLINE_EXCEEDED:case yh.RESOURCE_EXHAUSTED:case yh.INTERNAL:case yh.UNAVAILABLE:case yh.UNAUTHENTICATED:return!1;case yh.INVALID_ARGUMENT:case yh.NOT_FOUND:case yh.ALREADY_EXISTS:case yh.PERMISSION_DENIED:case yh.FAILED_PRECONDITION:case yh.ABORTED:case yh.OUT_OF_RANGE:case yh.UNIMPLEMENTED:case yh.DATA_LOSS:return!0}}(t)&&t!==yh.ABORTED}(e.code)){const n=t.D_.shift();$g(t).Zo(),await kg(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await xg(t)}}(t,e),Lg(t)&&Pg(t)}async function Vg(t,e){const n=mh(t);n.asyncQueue.verifyOperationInProgress(),uh("RemoteStore","RemoteStore received new credentials");const i=Cg(n);n.v_.add(3),await Sg(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Ig(n)}function $g(t){return t.B_||(t.B_=function(t,e,n){const i=mh(t);return i.R_(),new bg(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:Mg.bind(null,t),To:jg.bind(null,t),E_:Rg.bind(null,t),T_:Fg.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await xg(t)):(await t.B_.stop(),t.D_.length>0&&(uh("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}class Ug{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new _h,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Ug(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vh(yh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bg(t,e){if(hh("AsyncQueue",`${e}: ${t}`),Xh(t))return new vh(yh.UNAVAILABLE,`${e}: ${t}`);throw t}class qg{constructor(){this.queries=new If((t=>bf(t)),wf),this.onlineState="Unknown",this.K_=new Set}}class zg{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new If((t=>bf(t)),wf),this.pa=new Map,this.ya=new Set,this.wa=new ad(jh.comparator),this.Sa=new Map,this.ba=new Gp,this.Da={},this.Ca=new Map,this.va=$p.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Hg(t,e,n){const i=mh(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=mh(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.Q_)t.U_(e)&&(i=!0)})),i&&function(t){t.K_.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Gg(t,e){const n=mh(t),i=e.batch.batchId;try{const t=await function(t,e){const n=mh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Hh.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);gh(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Rf();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Qg(n,i,null),Wg(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Xg(n,t)}catch(t){await zh(t)}}async function Kg(t,e,n){const i=mh(t);try{const t=await function(t,e){const n=mh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(gh(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Qg(i,e,n),Wg(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Xg(i,t)}catch(n){await zh(n)}}function Wg(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function Qg(t,e,n){const i=mh(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}async function Xg(t,e,n){const i=mh(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=eg.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=mh(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Hh.forEach(e,(e=>Hh.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Hh.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Xh(t))throw t;uh("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Yg(t,e){const n=mh(t);if(!n.currentUser.isEqual(e)){uh("SyncEngine","User change. New user:",e.toKey());const t=await sg(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new vh(yh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ca.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Xg(n,t.us)}}function Jg(t){const e=mh(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kg.bind(null,e),e}class Zg{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=vg(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new rg(t,e,n,i)}(this.persistence,new ig,t.initialUser,this.serializer)}createPersistence(t){return new Jp(tg.Hr,this.serializer)}createSharedClientState(t){return new cg}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tm{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Hg(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yg.bind(null,this.syncEngine),await async function(t,e){const n=mh(t);e?(n.v_.delete(2),await Ig(n)):e||(n.v_.add(2),await Sg(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new qg}createDatastore(t){const e=vg(t.databaseInfo.databaseId),n=function(t){return new mg(t)}(t.databaseInfo);return function(t,e,n,i){return new Eg(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Ag(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Hg(this.syncEngine,t,0)),ug.D()?new ug:new lg)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new zg(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=mh(t);uh("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await Sg(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}class em{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=oh.UNAUTHENTICATED,this.clientId=kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{uh("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(uh("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vh(yh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _h;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Bg(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function nm(t,e){t.asyncQueue.verifyOperationInProgress(),uh("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await sg(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function im(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){uh("FirestoreClient","Using user provided OfflineComponentProvider");try{await nm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===yh.FAILED_PRECONDITION||t.code===yh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;dh("Error using user provided cache. Falling back to memory cache: "+n),await nm(t,new Zg)}}else uh("FirestoreClient","Using default OfflineComponentProvider"),await nm(t,new Zg);return t._offlineComponents}(t);uh("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Vg(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Vg(e.remoteStore,n))),t._onlineComponents=e}function rm(t){return async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(uh("FirestoreClient","Using user provided OnlineComponentProvider"),await im(t,t._uninitializedComponentsProvider._online)):(uh("FirestoreClient","Using default OnlineComponentProvider"),await im(t,new tm))),t._onlineComponents}(t).then((t=>t.syncEngine))}function sm(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const om=new Map;function am(t,e,n){if(!n)throw new vh(yh.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cm(t){if(!jh.isDocumentKey(t))throw new vh(yh.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lm(t){if(jh.isDocumentKey(t))throw new vh(yh.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function um(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ph()}function hm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vh(yh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=um(t);throw new vh(yh.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class dm{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new vh(yh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new vh(yh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new vh(yh.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sm(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new vh(yh.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new vh(yh.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new vh(yh.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fm{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vh(yh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new vh(yh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dm(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new bh;switch(t.type){case"firstParty":return new Ih(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new vh(yh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=om.get(t);e&&(uh("ComponentProvider","Removing Datastore"),om.delete(t),e.terminate())}(this),Promise.resolve()}}class pm{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new pm(this.firestore,t,this._query)}}class gm{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gm(this.firestore,t,this._key)}}class mm extends pm{constructor(t,e,n){super(t,e,function(t){return new ff(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gm(this.firestore,null,new jh(t))}withConverter(t){return new mm(this.firestore,t,this._path)}}class ym{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new _g(this,"async_queue_retry"),this._u=()=>{const t=yg();t&&uh("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=yg();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=yg();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new _h;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Xh(t))throw t;uh("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw hh("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=Ug.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&ph()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}class vm extends fm{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new ym,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_m(this),this._firestoreClient.terminate()}}function _m(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new Ed(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,sm(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new em(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class wm{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wm(pd.fromBase64String(t))}catch(t){throw new vh(yh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new wm(pd.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class bm{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new vh(yh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fh(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Em{constructor(t){this._methodName=t}}class Tm{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new vh(yh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new vh(yh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xh(this._lat,t._lat)||xh(this._long,t._long)}}const Am=/^__.*__$/;class Im{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new lp(t,this.data,this.fieldMask,e,this.fieldTransforms):new cp(t,this.data,e,this.fieldTransforms)}}function Sm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ph()}}class Cm{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new Cm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Fm(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(Sm(this.du)&&Am.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class Dm{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||vg(t)}Su(t,e,n,i=!1){return new Cm({du:t,methodName:e,wu:n,path:Fh.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function km(t){const e=t._freezeSettings(),n=vg(t._databaseId);return new Dm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xm(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);Pm("Data must be an object, but it was:",o,i);const a=Nm(i,o);let c,l;if(s.merge)c=new dd(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Mm(e,i,n);if(!o.contains(r))throw new vh(yh.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);jm(t,r)||t.push(r)}c=new dd(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Im(new jd(a),c,l)}function Om(t,e){if(Lm(t=Fs(t)))return Pm("Unsupported field value:",e,t),Nm(t,e);if(t instanceof Em)return function(t,e){if(!Sm(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Om(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Fs(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $f(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Nh.fromDate(t);return{timestampValue:bp(e.serializer,n)}}if(t instanceof Nh){const n=new Nh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bp(e.serializer,n)}}if(t instanceof Tm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wm)return{bytesValue:Ep(e.serializer,t._byteString)};if(t instanceof gm){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ip(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${um(t)}`)}(t,e)}function Nm(t,e){const n={};return od(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sd(t,((t,i)=>{const r=Om(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Lm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Nh||t instanceof Tm||t instanceof wm||t instanceof gm||t instanceof Em)}function Pm(t,e,n){if(!Lm(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=um(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function Mm(t,e,n){if((e=Fs(e))instanceof bm)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(Rm)>=0)throw Fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bm(...e.split("."))._internalPath}catch(i){throw Fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw Fm("Field path arguments must be of type string or ",t,!1,void 0,n)}const Rm=new RegExp("[~\\*/\\[\\]]");function Fm(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new vh(yh.INVALID_ARGUMENT,a+t+c)}function jm(t,e){return t.some((t=>t.isEqual(e)))}class Vm{}class $m extends Vm{}class Um extends $m{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Um(t,e,n)}_apply(t){const e=this._parse(t);return Hm(t._query,e),new pm(t.firestore,t.converter,vf(t._query,e))}_parse(t){const e=km(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new vh(yh.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){zm(o,s);const e=[];for(const n of o)e.push(qm(i,t,n));a={arrayValue:{values:e}}}else a=qm(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||zm(o,s),a=function(t,e,n,i=!1){return Om(n,t.Su(i?4:3,e))}(n,"where",o,"in"===s||"not-in"===s);return Kd.create(r,s,a)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class Bm extends Vm{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Bm(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Wd.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const t of i)Hm(n,t),n=vf(n,t)}(t._query,e),new pm(t.firestore,t.converter,vf(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function qm(t,e,n){if("string"==typeof(n=Fs(n))){if(""===n)throw new vh(yh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gf(e)&&-1!==n.indexOf("/"))throw new vh(yh.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Mh.fromString(n));if(!jh.isDocumentKey(i))throw new vh(yh.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Nd(t,new jh(i))}if(n instanceof gm)return Nd(t,n._key);throw new vh(yh.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${um(n)}.`)}function zm(t,e){if(!Array.isArray(t)||0===t.length)throw new vh(yh.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hm(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new vh(yh.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new vh(yh.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Gm(t,e){const n=hm(t.firestore,vm),i=function(t,e,...n){if(t=Fs(t),1===arguments.length&&(e=kh.newId()),am("doc","path",e),t instanceof fm){const i=Mh.fromString(e,...n);return cm(i),new gm(t,null,new jh(i))}{if(!(t instanceof gm||t instanceof mm))throw new vh(yh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Mh.fromString(e,...n));return cm(i),new gm(t.firestore,t instanceof mm?t.converter:null,new jh(i))}}(t),r=function(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}(t.converter,e);return function(t,e){return function(t,e){const n=new _h;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Jg(t);try{const t=await function(t,e){const n=mh(t),i=Nh.now(),r=e.reduce(((t,e)=>t.add(e.key)),Rf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Cf(),c=Rf();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=op(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new lp(t.key,e,Vd(e.value.mapValue),tp.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:xf(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new ad(xh)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await Xg(i,t.changes),await xg(i.remoteStore)}catch(t){const e=Bg(t,"Failed to persist write");n.reject(e)}}(await rm(t),e,n))),n.promise}(function(t){return t._firestoreClient||_m(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}(n,[xm(km(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,tp.exists(!1))]).then((()=>i))}new WeakMap,function(t,e=!0){ah="10.8.1",Ao(new js("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new vm(new Th(t.getProvider("auth-internal")),new Ch(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new vh(yh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),xo(sh,"4.4.3",t),xo(sh,"4.4.3","esm2017")}(),xo("firebase","10.8.1","app");const Km="@firebase/installations",Wm="0.6.5",Qm=1e4,Xm=`w:${Wm}`,Ym="FIS_v2",Jm="https://firebaseinstallations.googleapis.com/v1",Zm=36e5,ty=new Ds("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ey(t){return t instanceof Cs&&t.code.includes("request-failed")}function ny({projectId:t}){return`${Jm}/projects/${t}/installations`}function iy(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function ry(t,e){const n=(await e.json()).error;return ty.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function sy({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function oy(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ay(t){return new Promise((e=>{setTimeout(e,t)}))}const cy=/^[cdef][\w-]{21}$/,ly="";function uy(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return cy.test(e)?e:ly}catch(t){return ly}}function hy(t){return`${t.appName}!${t.appId}`}const dy=new Map;function fy(t,e){const n=hy(t);py(n,e),function(t,e){const n=(!gy&&"BroadcastChannel"in self&&(gy=new BroadcastChannel("[Firebase] FID Change"),gy.onmessage=t=>{py(t.data.key,t.data.fid)}),gy);n&&n.postMessage({key:t,fid:e}),0===dy.size&&gy&&(gy.close(),gy=null)}(n,e)}function py(t,e){const n=dy.get(t);if(n)for(const t of n)t(e)}let gy=null;const my="firebase-installations-database",yy=1,vy="firebase-installations-store";let _y=null;function wy(){return _y||(_y=co(my,yy,{upgrade:(t,e)=>{0===e&&t.createObjectStore(vy)}})),_y}async function by(t,e){const n=hy(t),i=(await wy()).transaction(vy,"readwrite"),r=i.objectStore(vy),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||fy(t,e.fid),e}async function Ey(t){const e=hy(t),n=(await wy()).transaction(vy,"readwrite");await n.objectStore(vy).delete(e),await n.done}async function Ty(t,e){const n=hy(t),i=(await wy()).transaction(vy,"readwrite"),r=i.objectStore(vy),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||fy(t,o.fid),o}async function Ay(t){let e;const n=await Ty(t.appConfig,(n=>{const i=function(t){return Cy(t||{fid:uy(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ty.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=ny(t),r=sy(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:Ym,appId:t.appId,sdkVersion:Xm},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await oy((()=>fetch(i,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:iy(t.authToken)}}throw await ry("Create Installation",c)}(t,e);return by(t.appConfig,n)}catch(n){throw ey(n)&&409===n.customData.serverCode?await Ey(t.appConfig):await by(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Iy(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return n.fid===ly?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Iy(t){let e=await Sy(t.appConfig);for(;1===e.registrationStatus;)await ay(100),e=await Sy(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Ay(t);return n||e}return e}function Sy(t){return Ty(t,(t=>{if(!t)throw ty.create("installation-not-found");return Cy(t)}))}function Cy(t){return 1===(e=t).registrationStatus&&e.registrationTime+Qm<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Dy({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${ny(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=sy(t);return n.append("Authorization",function(t){return`${Ym} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:Xm,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await oy((()=>fetch(i,a)));if(c.ok)return iy(await c.json());throw await ry("Generate Auth Token",c)}async function ky(t,e=!1){let n;const i=await Ty(t.appConfig,(i=>{if(!Oy(i))throw ty.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Zm}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await xy(t.appConfig);for(;1===n.authToken.requestStatus;)await ay(100),n=await xy(t.appConfig);const i=n.authToken;return 0===i.requestStatus?ky(t,e):i}(t,e),i;{if(!navigator.onLine)throw ty.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await Dy(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await by(t.appConfig,i),n}catch(n){if(!ey(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await by(t.appConfig,n)}else await Ey(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function xy(t){return Ty(t,(t=>{if(!Oy(t))throw ty.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+Qm<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function Oy(t){return void 0!==t&&2===t.registrationStatus}function Ny(t){return ty.create("missing-app-config-values",{valueName:t})}const Ly="installations";Ao(new js(Ly,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Ny("App Configuration");if(!t.name)throw Ny("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ny(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Io(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Ao(new js("installations-internal",(t=>{const e=Io(t.getProvider("app").getImmediate(),Ly).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await Ay(e);return i?i.catch(console.error):ky(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await Ay(t);e&&await e}(n),(await ky(n,e)).token}(e,t)}}),"PRIVATE")),xo(Km,Wm),xo(Km,Wm,"esm2017");const Py="analytics",My="firebase_id",Ry="origin",Fy=6e4,jy="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vy="https://www.googletagmanager.com/gtag/js",$y=new Qs("@firebase/analytics"),Uy=new Ds("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function By(t){if(!t.startsWith(Vy)){const e=Uy.create("invalid-gtag-resource",{gtagURL:t});return $y.warn(e.message),""}return t}function qy(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const zy=30,Hy=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Gy(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Ky(t,e=Hy,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Uy.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Uy.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Qy;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Fy),Wy({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Wy(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Hy){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(Uy.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(a)return $y.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Gy(i)},s=jy.replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw Uy.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(o),e}catch(e){const c=e;if(!function(t){if(!(t instanceof Cs&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(r.deleteThrottleMetadata(o),a)return $y.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw e}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?Rs(n,r.intervalMillis,zy):Rs(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,u),$y.debug(`Calling attemptFetch again in ${l} millis`),Wy(t,u,i,r)}}class Qy{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let Xy,Yy;async function Jy(t,e,n,i,r,s,o){var a;const c=Ky(t);c.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&$y.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>$y.error(t))),e.push(c);const l=async function(){if(!Is())return $y.warn(Uy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Ss()}catch(t){return $y.warn(Uy.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[u,h]=await Promise.all([c,l]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Vy)&&n.src.includes(t))return n;return null})(s)||function(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),n}(0,{createScriptURL:By}),i=document.createElement("script"),r=`${Vy}?l=${t}&id=${e}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,u.measurementId),Yy&&(r("consent","default",Yy),Yy=void 0),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d[Ry]="firebase",d.update=!0,null!=h&&(d[My]=h),r("config",u.measurementId,d),Xy&&(r("set",Xy),Xy=void 0),u.measurementId}class Zy{constructor(t){this.app=t}_delete(){return delete tv[this.app.options.appId],Promise.resolve()}}let tv={},ev=[];const nv={};let iv,rv,sv="dataLayer",ov=!1;function av(t,e,n){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Uy.create("invalid-analytics-context",{errorInfo:e});$y.warn(n.message)}}();const i=t.options.appId;if(!i)throw Uy.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Uy.create("no-api-key");$y.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=tv[i])throw Uy.create("already-exists",{id:i});if(!ov){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(sv);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function(t,e,n,i){return async function(r,...s){try{if("event"===r){const[i,r]=s;await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await qy(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(t){$y.error(t)}}(t,e,n,i,r)}else if("config"===r){const[r,o]=s;await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await qy(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){$y.error(t)}t("config",r,s)}(t,e,n,i,r,o)}else if("consent"===r){const[e]=s;t("consent","update",e)}else if("get"===r){const[e,n,i]=s;t("get",e,n,i)}else if("set"===r){const[e]=s;t("set",e)}else t(r,...s)}catch(t){$y.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(tv,ev,nv,sv,"gtag");rv=t,iv=e,ov=!0}return tv[i]=Jy(t,ev,nv,e,iv,sv,n),new Zy(t)}const cv="@firebase/analytics",lv="0.10.1";function uv(t){return uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(t)}function hv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function dv(){dv=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var s=e&&e.prototype instanceof y?e:y,o=Object.create(s.prototype),a=new x(i||[]);return r(o,"_invoke",{value:S(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function _(){}var w={};l(w,o,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(O([])));E&&E!==n&&i.call(E,o)&&(w=E);var T=_.prototype=y.prototype=Object.create(w);function A(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,s,o,a){var c=h(t[r],t,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==uv(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var s;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function S(e,n,i){var r=d;return function(s,o){if(r===p)throw new Error("Generator is already running");if(r===g){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var c=C(a,i);if(c){if(c===m)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===d)throw r=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=p;var l=h(e,n,i);if("normal"===l.type){if(r=i.done?g:f,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=g,i.method="throw",i.arg=l.arg)}}}function C(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var s=h(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(uv(e)+" is not iterable")}return v.prototype=_,r(T,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:v,configurable:!0}),v.displayName=l(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,c,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},A(I.prototype),l(I.prototype,a,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new I(u(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},A(T),l(T,c,"Generator"),l(T,o,(function(){return this})),l(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:O(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function fv(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(i,r)}function pv(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){fv(s,i,r,o,a,"next",t)}function a(t){fv(s,i,r,o,a,"throw",t)}o(void 0)}))}}Ao(new js(Py,((t,{options:e})=>av(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),Ao(new js("analytics-internal",(function(t){try{const e=t.getProvider(Py).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=Fs(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(rv,tv[t.app.options.appId],e,n,i).catch((t=>$y.error(t)))}(e,t,n,i)}}catch(t){throw Uy.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),xo(cv,lv),xo(cv,lv,"esm2017"),function(t=ko()){const e=Io(t=Fs(t),Py);e.isInitialized()?e.getImmediate():function(t,e={}){const n=Io(t,Py);if(n.isInitialized()){const t=n.getImmediate();if(xs(e,n.getOptions()))return t;throw Uy.create("already-initialized")}n.initialize({options:e})}(t)}(Do({apiKey:"AIzaSyCBdUr1iMLziuEHRuskXnr6pSVNyn09SoI",authDomain:"countrygame-a9692.firebaseapp.com",projectId:"countrygame-a9692",storageBucket:"countrygame-a9692.appspot.com",messagingSenderId:"598507736419",appId:"1:598507736419:web:6a540284f7a3f95de81756",measurementId:"G-SBLFFRTGMS"}));var gv=function(t,e){const n=Io(ko(),"firestore").getImmediate({identifier:"(default)"});if(!n._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=bs())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})("firestore");t&&function(t,e,n,i={}){var r;const s=(t=hm(t,fm))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&dh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=oh.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ws(JSON.stringify({alg:"none",type:"JWT"})),ws(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new vh(yh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new oh(s)}t._authCredentials=new Eh(new wh(e,n))}}(n,...t)}return n}(),mv=function(t,e,...n){if(t=Fs(t),am("collection","path",e),t instanceof fm){const i=Mh.fromString(e,...n);return lm(i),new mm(t,null,i)}{if(!(t instanceof gm||t instanceof mm))throw new vh(yh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Mh.fromString(e,...n));return lm(i),new mm(t.firestore,null,i)}}(gv,"countries"),yv=(function(t,e,...n){let i=[];e instanceof Vm&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof Bm)).length,n=t.filter((t=>t instanceof Um)).length;if(e>1||e>0&&n>0)throw new vh(yh.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const e of i)t=e._apply(t)}(mv),document.querySelectorAll(".category")),vv=document.querySelector(".toBeat"),_v=document.querySelectorAll(".carousel-flag"),wv=document.querySelectorAll(".carousel-caption"),bv=null,Ev=!1,Tv=!0;l().then((function(t){Av(t),Iv(t),bv=t,Sv(t),vv.innerText="To Beat: ".concat(bv.name)})).catch((function(t){console.error("Error getting random country:",t)}));var Av=function(t){var e=document.querySelector(".flag"),n=t.code;e.src="./assets/4x3/".concat(n,".svg")},Iv=function(t){var e=document.querySelector(".countryName");t.name,e.textContent="".concat(t.name)},Sv=function(){var t=pv(dv().mark((function t(){var e;return dv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=document.querySelectorAll(".list-group-item")).forEach((function(t){t.classList.add("locked")})),setTimeout(pv(dv().mark((function t(){var n;return dv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:return t.next=3,l();case 3:n=t.sent;case 4:if(n.name===bv.name){t.next=1;break}case 5:Av(n),Iv(n),bv=n,e.forEach((function(t){t.classList.remove("locked")})),vv.classList.add("locked"),Array.from(e).every((function(t){return t.classList.contains("locked")}))&&(Dv(),Ev=!0),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Error getting random country:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),3e3);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Cv=0;yv.forEach((function(t){t.addEventListener("click",function(){var t=pv(dv().mark((function t(e){var n,i,r,s;return dv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.target.classList.contains("category")||Ev&&e.target.classList.contains("locked")){t.next=25;break}if(e.target.classList.contains("locked")){t.next=25;break}if(e.target.innerText="".concat(e.target.innerText,"   ").concat(bv.name),e.target.classList.add("locked"),n=bv.code,i="./assets/4x3/".concat(n,".svg"),wv[Cv].innerText="".concat(bv.name,", ").concat(bv.continent),_v[Cv].src=i,Cv++,r=document.querySelectorAll(".list-group-item"),Array.from(r).every((function(t){return t.classList.contains("locked")}))&&(Tv=!1,Dv(),Ev=!0),!Tv){t.next=25;break}return t.prev=13,t.next=16,l();case 16:s=t.sent,Av(s),Iv(s),bv=s,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(13),console.error("Error getting random country:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[13,22]])})));return function(e){return t.apply(this,arguments)}}())}));var Dv=function(){var t,e;Ev||(t=document.querySelectorAll(".locked"),e={},t.forEach((function(t){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],c=!0,l=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return hv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.textContent.split(":").map((function(t){return t.trim()})),2),i=n[0],r=n[1];e[i]=r,console.log(e[r])})),Gm(mv,e).catch((function(t){console.error("Error adding document: ",t)})),document.getElementById("popup-1").classList.toggle("active"),Ev=!0)};document.querySelector(".restart").addEventListener("click",(function(t){console.log("restarting"),location.reload()}))})();